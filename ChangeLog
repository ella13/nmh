2010-12-09  Ken Hornstein <kenh@pobox.com>

	* h/nntp.h, configure.in, h/Makefile.in, h/mts.h, h/popsbr.h,
	  man/inc.man, man/mh-chart.man, man/mh-tailor.man, man/msgchk.man,
	  sbr/Makefile.in, sbr/mts.c, uip/Makefile.in, uip/inc.c, uip/msgchk.c,
	  uip/msh.c, uip/mshcmds.c, uip/popsbr.c: Massive garbage collection.
	  Remove functionality for APOP, RPOP, all NNTP support (including
	  bboards), and MPOP.

2010-12-08  David Levine <levinedl@acm.org>

	* uip/whatnowsbr.c: enforce requirement of at least one file
	  argument to attach command.

2010-12-08  David Levine <levinedl@acm.org>

	* man/send.man: added name= portion to Content-Type
	  headers to reflect 2006-10-24 change to uip/sendsbr.c.
	  That change allowed mhstore to use the (file)name when
	  extracting attachments.

2010-12-03  Ken Hornstein <kenh@pobox.com>

	* Everything: remove RCS keywords from files, since they no longer
	  work after git migration.

2010-12-02  Ken Hornstein <kenh@pobox.com>

	* .cvsignore, .gitignore, autogen.sh, */.cvsignore: Update files
	  for git conversion.

2010-12-19  Ken Hornstein <kenh@pobox.com>

	* aclocal.m4, config/Makefile.in, configure.in, man/mh-chart.man,
	  man/post.man, man/send.man, mts/smtp/Makefile.in, mts/smtp/smtp.c,
	  mts/smtp/smtp.h, sbr/Makefile.in, uip/Makefile.in, uip/post.c,
	  uip/send.c, uip/whatnowsbr.c, uip/whom.c: Clean up autoconf
	  code for handling of compiler flags for SASL, and add support
	  for TLS to the SMTP MTA.

2010-11-12  Peter Maydell <pmaydell@chiark.greenend.org.uk>

	* man/slocal.man: fix formatting error that meant a
	  subsection heading wasn't displayed as such.

2010-11-10  Peter Maydell <pmaydell@chiark.greenend.org.uk>

	* configure.in: add a level of expansion for mandir
	  when printing the end-of-configure install path
	  summary.

2010-11-09  Peter Maydell <pmaydell@chiark.greenend.org.uk>

	* man/rmm.man: fix error in synopsis: the option is
	  [no]unlink, not [no]link.

2010-08-31  David Levine <levinedl@acm.org>

	* uip/.cvsignore:  added "new".

2010-02-03  Earl Hood <earl@earlhood.com>

	* Bug #15213, #18635: The use of the insecure m_scratch() and
	  m_tmpfil() functions have been replaced by m_mktemp()
	  or m_mktemp2() functions (defined in sbr/m_mktemp.c).
	  The new functions use mkstemp() to securely create
	  temporary files to avoid the numerous race conditions
	  that exist with the old functions.  This does assume
	  that mkstemp() is available.  Unsure if we need to
	  create an alternative implementation if mkstemp() is
	  not available.  More information about new temp file
	  functions in m_mktemp.c, including the support for
	  MHTMPDIR, TMPDIR, and TMP envvars.

2010-02-02  Earl Hood <earl@earlhood.com>

	* mts/smtp/smtp.c: added SASL support if mts configuration
	  setting is set to "sendmail".  This is useful if sendmail
	  conf option is to a custom script that creates a proxy
	  connection to an smtp server.

	* sbr/mts.c: added support for MHMTSCONF and MHMTSUSERCONF
	  envvars.  The former specifies an alternative system
	  mts.conf to use.  The later specifies a user-specific
	  mts.conf to use.  This one will be read after the system
	  conf, so the user's conf only needs to set options they
	  want to override.  The MHMTSUSERCONF allows a user to set
	  personal alternative mail submission methods w/o affecting
	  other users on the system.

	* uip/whom.c: added SASL-based options so address checking
	  can work against a server that requires SASL.

2009-12-29  David Levine <levinedl@acm.org>

	* uip/mhlistsbr.c, uip/mhlsbr.c, uip/picksbr.c: cast
	pointers to unsigned long before casting to unsigned int
	to avoid warnings on 64-bit about casting from pointer
	to int of different size.

	* uip/new.c: cast folder_len to int to avoid warning on
	64-bit about passing a size_t to an int conversion specifier.

2009-12-25  David Levine <levinedl@acm.org>

	* uip/inc.c: gcc 4.4.1 noticed that maildir could have been
	used before initialization.  In fact, if that code was ever
	reached, maildir would never have been initialized.  It's in
	an adios call, so replaced with NULL.

2009-12-21  David Levine <levinedl@acm.org>

	* mts/smtp/smtp.c: In sm_auth_sasl (), removed zeroing of
	sasl_inbuffer because it could be used in sm_fget ().  Also,
	removed allocation of sasl_inbuffer because that was done in
	either smtp_init () or sendmail_init ().

2009-01-17  Eric Gillespie  <epg@pretzelnet.org>

	* etc/mhn.defaults.sh: Never try to make mhshow start xterm.

2009-01-16  Eric Gillespie  <epg@pretzelnet.org>

	* test/runtest, test/tests/inc/test-deb359167,
	test/tests/inc/test-eom-align, test/tests/manpages/test-manpages:
	Load common.sh via absolute path, otherwise some /bin/sh
	(e.g. dash) can't load it.

	* uip/Makefile.in, uip/new.c, test/tests/new/test-basic: Add new
	program, and fn/fp/unseen symlinks.

	* test/{runtest,setup-test}: Move MH profile under Mail directory
	so each test script will have its own to muck with, if needed.

	* h/Makefile.in, h/crawl_folders.h, sbr/Makefile.in,
	sbr/crawl_folders.c, uip/folder.c: Extract the folder crawling
	code from folder.c into new crawl_folders function, using a
	callback to assemble the folder info in folder.c.  Drop compare
	function and use strcmp instead.  Rename addfold and addir to
	add_folder and add_children (add dir vs. add folder?
	confusing names).

2008-12-26  Peter Maydell  <pmaydell@chiark.greenend.org.uk>

	* sbr/m_getfld.c: fix two bugs which could cause us to walk off
	the beginning of the stdio or prefix-string buffer when checking
	for presence of the end-of-message delimiter in some situations.
	This might cause inc to dump core if you were unlucky. (This was
	Debian bug 359167.)
	* test/tests/inc/{md5sums,msgheader.txt,test-deb359167,
	test-eom-align,fromline.txt,filler.txt,deb359167.mbox}: new tests
	both for the specific problem and to try to check various alignments
	of the eom string with the stdio buffer ending.
	* test/common.sh: new file for common utility functions for the
	test scripts. Moved findprog out of manpage test script into this
	new file. Added some functions for doing progress indicators.

2008-12-25  Peter Maydell  <pmaydell@chiark.greenend.org.uk>

	* test/runtest: automatically run setup-test if it hasn't already
	been done. Improve error handling in test script with 'set -e'.

2008-10-23  David Levine <levinedl@acm.org>

	* h/mh.h: raised NAMESZ from 128 to 999.  RFC 2822 limits line
	lengths to 998 characters, so a header name can be at most that long.
	m_getfld limits header names to 2 less than NAMESZ, which is fine,
	because header names must be followed by a colon.  Add one for
	terminating NULL.

2008-10-23  David Levine <levinedl@acm.org>

	* sbr/m_getfld.c: in warning message, use NAMESZ-2 instead of
	NAMESZ-1 bytes because the message says "exceeds", not
	"is greater than or equal to".

2008-10-23  David Levine <levinedl@acm.org>

	* docs/MAIL.FILTERING: added note on removing procmail -f or
	-r options to try to suppress generation of a "From " line on
	incoming messages.

2008-08-14  Eric Gillespie  <epg@pretzelnet.org>

	* test/setup-test: Don't run autogen.sh unless needed.  Build in a
	blddir under the temporary directory so as not to interfere with
	whatever the developer may be doing in the source directory.
	If the temporary directory already exists, rebuild and install it.

2008-08-13  Eric Gillespie  <epg@pretzelnet.org>

	* sbr/ambigsw.c: Send print_sw output to stderr.  This avoids
	strange problems with scan `pick -bogus`, not to mention being
	nicer anyway.

	* sbr/getans.c, sbr/print_help.c, uip/msh.c: Send print_sw output
	to stdout.

	* h/prototypes.h, sbr/print_sw.c (print_sw): Add FILE * argument
	and send output there rather than to stdout.

	* test/tests/pick/test-stderr: Add test that error messages don't
	end up going to stdout.

2008-08-13  Eric Gillespie  <epg@pretzelnet.org>

	* uip/pick.c: Print matching messages immediately, instead of
	waiting until the very end to print anything.
	Ensure valid sequence name as soon as we parse it from command,
	instead of searching the messages first.

2008-08-13  Eric Gillespie  <epg@pretzelnet.org>

	* uip/Makefile.in, uip/popi.c: Remove popi.c, which has been dead
	since PatchSet 257 (2000/06/12 11:07:34 UTC).

2008-08-13  Eric Gillespie  <epg@pretzelnet.org>

	* h/mhparse.h: Move interfaces also used by mhbuildsbr.c here
	from mhparse.c.

	* uip/Makefile.in (mhbuild): Build with mhparse.o.

	* uip/mhbuildsbr.c: Drop the duplication of mhparse.c.

	* uip/mhbuild.c, uip/mhlist.c, uip/mhn.c, uip/mhshow.c,
	uip/mhstore.c, uip/mhtest.c: Drop check swdeclaration, which is
	now in mhparse.h.

	* uip/mhparse.c: Move some declarations to mhparse.h, and remove
	'static' from the definitions here.
	(get_ctinfo): Take magic mhbuild support from mhbuildsbr.c's copy,
	and adapt callers.
	(incl_name_value, extract_name_value): Move from mhbuildsbr.c to
	support get_ctinfo change).
	(get_content, open7Bit): Add Content-Disposition support, added to
	mhbuildsbr.c's copy in mhbuildsbr.c r1.12 (PatchSet 549).
	(InitText): Default to CHARSET_UNSPECIFIED instead of "US-ASCII",
	as mhbuildsbr.c's copy did.  Explain termproc.
	(openBase64, openQuoted, open7Bit): Fix comment from r1.5:
	suffixes, not prefixes.
	(openMail): Explain showproc.

	* test/tests/mhshow/test-cte-binary: Add test for
	Content-Transfer-Encoding: binary (Debian #136976).

	* test/tests/mhbuild/test-forw: Add an mhbuild test, testing forw
	with and without RFC-934 mode.  More mhbuild tests would be nice.

2008-08-13  Eric Gillespie  <epg@pretzelnet.org>

	* test/tests/bad-input/test-header: Add test for it.

	* sbr/m_getfld.c: If we reach the end of the line without finding
	a ':' when parsing a header field, treat that line as the
	beginning of the body rather than blowing up.  These messages are
	usually spam, but it's nice to be able to at least scan them.

2008-08-12  Eric Gillespie  <epg@pretzelnet.org>

	* test/tests/mhshow/test-qp: Test various valid and invalid
	escape sequences.

	* uip/mhparse.c (openQuoted): Simplify the decode-or-show for loop by
	peeking ahead to the next byte(s) when encountering '=', and just let
	invalid escape sequences through as literals (fixes bug #15245).

2008-08-12  Peter Maydell  <pmaydell@chiark.greenend.org.uk>

	* autogen.sh (new file): add script for running the GNU
	autotools in the right order
	* INSTALL: mention that you need to run autogen.sh if you
	got nmh from CVS
	* docs/README.developers: mention autogen.sh rather than
	suggesting running autoheader and autoconf by hand.
	* test/setup-test: run autotools via autogen.sh

2008-08-08  Eric Gillespie  <epg@pretzelnet.org>

	* sbr/discard.c, sbr/m_getfld.c, uip/scansbr.c: Add support for
	DragonFlyBSD stdio (from NetBSD pkgsrc).

2008-08-05  Eric Gillespie  <epg@pretzelnet.org>

	* uip/folder.c: chdir(nmhdir) in main rather than in dodir, which
	is called many times.  Drop the chdir in get_folder_info, which
	served no purpose at all.  If struct stat has d_type (BSD), use
	that to skip processing (strcmp, stat, and so on) of message
	files, mostly undoing the slow-down from the last change.

	* configure.in: Call CHECK_TYPE_STRUCT_DIRENT_D_TYPE.

	* aclocal.m4: Add CHECK_TYPE_STRUCT_DIRENT_D_TYPE from
	GNU coreutils.

2008-08-04  Eric Gillespie  <epg@pretzelnet.org>

	* uip/folder.c: Simplify dodir/addir/addfold.  Dump hacky
	over-optimization in addir that tried to avoid readdir after all
	child directories had been read; this was also trying to support
	symlinks to directories, but would have been failing (because
	nlink may have gone to 0 with symlinks to directories remaining)
	had the lstat usage been correct (lstat doesn't fail for normal
	directories; should have used S_ISLNK).

2008-08-03  Peter Maydell  <pmaydell@chiark.greenend.org.uk>

	* test/setup-test: use 'set -e' so we stop on compile failure.
	Configure --enable-debug for convenience in debugging.

	* uip/whatnowsbr.c: bug #23319: rework the way we handle the working
	directory when invoking the user's shell, so that we don't have
	issues when the cwd contains a space or shell special character.
	* test/tests/whatnow/test-attach-detach, test/tests/whatnow/test-cd,
	test/tests/whatnow/test-ls: test cases for this.

	* sbr/fmt_compile.c: add 'do { ... } while (0)' wrappers
	to various multi-statement macros to avoid nasty surprises
	if the macros are used in if() clauses.

	* bug #23436: man/scan.man, man/forw.man, man/inc.man,
	man/mh-chart.man, man/mhmail.man, man/mhshow.man,
	man/mhstore.man, man/msgchk.man, man/packf.man, man/scan.man:
	fix minor syntax errors groff warns about.
	* test/runtest, test/README: allow test cases to report
	that they have been SKIPped as well as PASS/FAIL
	* test/tests/manpages/test-manpages - new test which runs groff
	on the manpages and checks that there are no warnings.
	* test/runalltests: ignore editor backup files

2008-08-03  Eric Gillespie  <epg@pretzelnet.org>

	* etc/replcomps, etc/replgroupcomps: Trim trailing whitespace from
	Subject field.

2008-08-03  Peter Maydell  <pmaydell@chiark.greenend.org.uk>

	* sbr/fmt_compile.c: when doing an if-test on the result
	of a function which returns a string result, check whether
	the string is non-empty (as the documentation says we do).
	Previously we were always testing the integer 'value'. Bug
	spotted by Eric Gillespie.
	* test/tests/repl/test-if-str: test case for this bug

2008-07-24  Eric Gillespie  <epg@pretzelnet.org>

	* test/setup-test: Run 'make clean' before building

2008-07-24  Eric Gillespie  <epg@pretzelnet.org>

	* test/runtest: cat test-temp-dir only once.  Destroy and create
	test Mail hierarchy here, so each test has its own independent
	test data.

	* test/setup-test: Drop needless pushd/popd, which don't exist in
	sh anyway.  Don't use aclocal, which is part of automake.
	Don't create Mail hierarchy here (see test/runtest).

	* test/tests/folder/test-create, tests/folder/test-total: Drop
	unused BINDIR.

	* tests/pick/test-pick: Remove failing no-op test.

	* test/tests/scan/test-scan: Write expected and actual output to
	files and diff them.  This way, if the output differs, diff
	provides the FAILing exit code and shows the differences.

2008-06-12  Josh Bressers <josh@bress.net>
	* man/repl.man, etc/mhl.reply:
	Add an attribution line when replying to messages.

2008-06-02  Peter Maydell  <pmaydell@chiark.greenend.org.uk>

	* h/mh.h, h/prototypes.h, sbr/done.c, uip/inc.c,
	uip/mhbuild.c, uip/mhlist.c, uip/mhn.c, uip/mhshow.c,
	uip/mhstore.c, uip/mhtest.c, uip/packf.c, uip/pick.c,
	uip/rcvdist.c, uip/rcvstore.c, uip/sendsbr.c: when
	building on gcc, use the noreturn attribute on various
	functions (should improve code and avoid some spurious
	'uninitialized variable' warnings).

2008-06-01  Peter Maydell  <pmaydell@chiark.greenend.org.uk>

	* docs/README.developers: update the bits about doing a
	release announcement, now I've actually done one.

2008-05-22  Peter Maydell  <pmaydell@chiark.greenend.org.uk>

	* uip/scansbr.c: don't use MB_CUR_MAX if we aren't compiled
	with multibyte support.

	* uip/whatnowsbr.c: factor out common code for writing ls
	shell command, and make it do more sensible buffer length
	checks. Also avoid relying on the return value of sprintf(),
	as some old systems don't return number of characters written.

2008-05-21  Peter Maydell  <pmaydell@chiark.greenend.org.uk>

	* sbr/utils.c (mh_xrealloc): don't assume realloc() can
	handle NULL pointers; some non-POSIX realloc()s can't.

	* sbr/dtimep.lex: add some table size declarations for the
	benefit of elderly lexes with small defaults.

2008-05-18  David Levine <levinedl@acm.org>

	* sbr/addrsbr.c: removed "err" from conditional, because gcc
	correctly warned that it would always evaluate as true.  It's
	the address of a static array.

2008-05-16  Oliver Kiddle <okiddle@yahoo.co.uk>

	* sbr/Makefile.in, config/Makefile.in: Don't use $< in target rules
	in makefiles, as POSIX says it's only defined in inference rules.

2008-05-13  David Levine <levinedl@acm.org>

	* configure.in, INSTALL: if --enable-masquerade is not
	specified to configure, enable all supported masquerade forms.
	This allows users to masquerade with the default
	configuration.	That seems to be more worthwhile now than
	trying to prevent users from using it, especially with
	single-user installations or those where a user can edit
	etc/mts.conf.

2008-05-04  Peter Maydell  <pmaydell@chiark.greenend.org.uk>

	* bug #23167: sbr/ruserpass.c (ruserpass): make bad permissions
	on .netrc be an instantly fatal error. Previously we returned
	an error value; however, no caller was checking it. So now
	ruserpass() has a void return type.

	* bug #23163: various minor fixes for the benefit of
	older Unixes (specifically SunOS 4):
	reintroduce strerror() substitute implementation
	provide memmove() substitute implementation

	* bug #23163: fix accidentally broken 'build outside
	source directory' feature
	
	* bug #23162: sbr/dtime.c: fix stray HAVE_TM_GMTOFF that
	wasn't updated to the new macro name.

2008-04-30  Peter Maydell  <pmaydell@chiark.greenend.org.uk>

	* mts/smtp/smtp.c: provide a callback for SASL_CB_AUTHNAME
	(fixes issue with SASL sending the wrong username in some
	circumstances). Thanks to <der_wachtmeister@freenet.de>
	for the patch.

2008-04-29  Peter Maydell  <pmaydell@chiark.greenend.org.uk>

	* Revert previous attempt at fix for SASL issue as it
	is the wrong approach.

	* Fix in correct manner, by making sm_rrecord() and thus
	sm_hear() set the length of the reply string correctly
	(the SASL libraries now care if you pass in the wrong
	length).

	* Correct various places in smtp.c where the reply string
	might not have been correctly NUL-terminated. Includes a
	fix for a particularly nasty and long standing screwup
	where the buffer length counting in smhear() was totally
	broken for continued lines from the server.

2008-04-29  Peter Maydell  <pmaydell@chiark.greenend.org.uk>

	* Cope with sasl_decode64() returning SASL_CONTINUE, as
	happens with newer sasl libraries and LOGIN auth.

2008-04-27  Peter Maydell  <pmaydell@chiark.greenend.org.uk>

	* Updated some of the 'how to do a release' documentation.

	* Upped the VERSION string to '1.3-dev', since 1.3-RC1 has
	been branched off.

2008-04-27  Peter Maydell  <pmaydell@chiark.greenend.org.uk>

	* Released nmh-1.3 RC1.

2008-04-11  Oliver Kiddle <okiddle@yahoo.co.uk>

	* acconfig.h, configure.in, sbr/dtime.c, sbr/pidwait.c,
	uip/mhshowsbr.c, uip/rcvtty.c, uip/slocal.c, uip/termsbr.c:
	move most remaining macros out of acconfig.h which is an
	obsolete feature of autoconf

2008-04-05  Peter Maydell <pmaydell@chiark.greenend.org.uk>

	* bug #18655: fix use of admonish() for a fatal error (should
	be adios(); only actual effect would be wrong exit code).
	Thanks to Craig Leres for spotting this.

2008-04-05  Peter Maydell <pmaydell@chiark.greenend.org.uk>

	* bug #20028 (Debian bug 399271): fix code assuming that pointer
	differences were 32 bits -- thanks to Dean Gaudet for the patch.

2008-01-25  Josh Bressers <josh@bress.net>

	* uip/mhshowsbr.c (show_all_messages): Be more generous when parsing
	multipart messages.

2007-11-04  Joel Reicher <joel@panacea.null.org>

	* Changed done() link overriding to function pointer. Return type
	is now void so that exit() can be used as done() callback. Dead
	code return from all done()s removed, with return 1 in main()
	following done() (should never be reached).

2007-08-21  Josh Bressers <josh@bress.net>

	* Red Hat Bug #253342: inc.c, utils.c, utils.h: When inc is run with
	the -silent flag, don't exit(1) for no apparent reason.

2007-03-12  Peter Maydell <pmaydell@chiark.greenend.org.uk>

	* bug #18630, #18631, #18632, #18634: various patches from
	Craig Leres fixing error message argument problems.

2007-03-12  Peter Maydell <pmaydell@chiark.greenend.org.uk>

	* bug #15212: configure.in, acconfig.h: remove configure test for
	broken AT&T vi. This test was broken (it was always returning
	failure even for non-broken vi implementations) and
	unfixable. Nobody should be using AT&T vi any more so I have
	simply moved it back to being a setting you can put manually into
	acconfig.h if you must.

2006-10-24  David Levine <levinedl@acm.org>

	* uip/sendsbr.c: with attachformat values of 1 or 2, add
	name= portion to Content-Type header.  This makes them
	consistent with attachformat value 0.  And it allows mhstore
	to use that (file)name when extracting attachments.

2006-08-26  Josh Bressers <josh@bress.net>

	* configure.in: If we're not using dotlocking, there is no need to set
	inc sgid.

2006-03-30  David Levine <levinedl@acm.org>

	* uip/sendsbr.c: with attachformat values of 1 or 2, only
	generate Content-Disposition headers for MIME attachments, not
	for the message contents themselves.  Microsoft Outlook Build
	10.0.6626, at least, doesn't show the message contents if they
	have Content-Disposition.

2006-03-09  Josh Bressers <josh@bress.net>

	* sbr/fmt_rfc2047.c (decode_rfc2047): Don't close the iconv descriptor
	if it isn't valid.

2006-03-08  Josh Bressers <josh@bress.net>

	* (mh_strcasecmp): Rename the private strcasecmp function to
	mh_strcasecmp.  This keeps the newer gnu linker happy.

2006-03-05  Oliver Kiddle <okiddle@yahoo.co.uk>

	* sbr/fmt_rfc2047.c: don't try to malloc 0 bytes if an RFC2047
	encoded block is empty

2006-03-04  Peter Maydell <pmaydell@chiark.greenend.org.uk>

	* etc/Makefile.in: use INSTALL_SCRIPT to install scripts;
	this allows INSTALL_PROGRAM to be set to 'install -s' so
	binaries are stripped on installation. Apparently the BSDs
	do this.

2006-02-25  David Levine <levinedl@acm.org>

	* uip/sendsbr.c: replaced st_mtim with st_mtime, that's what
	it should have been.  Added #include of h/tws.h to pick up
	dtime() prototype.

2006-02-20  David Levine <levinedl@acm.org>

	* h/mh.h, h/prototypes.h, uip/mhbuildsbr.c, uip/send.c,
	uip/sendsbr.c, uip/viamail.c, uip/whatnowsbr.c, man/send.man:
	added -attachformat switch to send, to support alternate MIME
	header contents when using -attach.  See send man page for
	description.

	* man/mhbuild.man: wrapped one appearance of "Content-Disposition"
	with quotes, to be consistent with others.

2006-02-20  Josh Bressers <josh@bress.net>

	* h/utils.h, sbr/utils.c, uip/flist.c, uip/folder.c: Move duplicate
	function num_digits into utils.c

2006-02-19  Josh Bressers <josh@bress.net>

	* sbr/m_draft.c, sbr/utils.c, uip/folder.c, uip/inc.c,
	uip/mhstoresbr.c, uip/popi.c, uip/refile.c: Add create_folder()
	function, replacing duplicate code during folder creation.

2006-02-18  David Levine <levinedl@acm.org>

	* h/mime.h, h/mhparse.h, uip/mhbuildsbr.c, uip/mhfree.c,
	man/mhbuild.man, docs/TODO:  added support for an optional
	Content-Disposition header in mhbuild (only).  Its contents
	are supplied between {}, positioned after the optional [], in
	a mhbuild directive.  If the contents do not contain a
	"filename=" parameter, and the directive has a filename, or
	something else that ends with "name=", then that will be used
	to add a "filename=" parameter to the header.

2006-02-12  David Levine <levinedl@acm.org>

	* docs/TODO: added RFC2183 to reference of RFC1806 for
	Content-Disposition header.

2006-01-31  David Levine <levinedl@acm.org>

	* uip/mhbuild.c, uip/mhbuildsbr.c, man/mhbuild.man:  added
	-nocontentid switch, to disable generation of Content-ID:
	header in MIME messages.  (Also added -contentid for
	symmetry.)  The default configuration of Microsoft Outlook,
	Build 10.0.3416 in particular, doesn't see attachments in
	incoming messages if there are Content-ID headers, see
	http://home.cwru.edu/~wrv/eudoraoutlookfix.html.  This allows
	users to easily accomodate that by adding
	mhbuild: -nocontentid to their .mh_profile.

2006-01-29  Oliver Kiddle  <okiddle@yahoo.co.uk>

	* bug 4360: uip/replsbr.c: remove trailing newlines from components
	to fix bug with spaces at the end of Subject/References in replies

2006-01-18  Oliver Kiddle  <okiddle@yahoo.co.uk>

	* configure.in: use AS_HELP_STRING for formatting help messages

	* configure.in, sbr/fmt_scan.c: add autoconf magic to support
	old systems that don't support multibyte character sets

	* sbr/fmt_scan.c: fix bug with insertion of newline being wrong if
	the num function was used at the end of the format buffer

2006-01-17  David Levine <levinedl@acm.org>

	* uip/post.c, uip/spost.c: in make_bcc_file (), use same
	logic as in finish_headers () to detect whether there is an
	existing From: line in the draft.  If draft_from masquerade
	flag is enabled, this allows the From: to be obeyed in the
	Bcc, instead of the old behavior of always replacing it with
	the signature.

2006-01-17  Oliver Kiddle  <okiddle@yahoo.co.uk>

	* sbr/fmt_scan.c: more robust multi-byte/column support for field
	widths, restoring right justification feature

2006-01-16  Oliver Kiddle  <okiddle@yahoo.co.uk>

	* h/aliasbr.h, h/rcvmail.h, man/Makefile.in, man/slocal.man,
	sbr/lock_file.c, uip/aliasbr.c, uip/dropsbr.c, uip/post.c,
	uip/slocal.c, man/mh-mts.man: remove remnants of code for MMDF

	* uip/scansbr.c: multiply buffer size by MB_CUR_MAX so multi-byte
	chars fit

2006-01-14  Josh Bressers <josh@bress.net>

	* sbr/fmt_scan.c: Turn the PUTSF macro into a function capable of
	handling multi column characters.

2006-01-07  Josh Bressers <josh@bress.net>

	* Remove sbr/strerror.c -- strerror(3) is defined in C89.

2006-01-06  Josh Bressers <josh@bress.net>

	* patch #3968: Move the add() function from its own file (add.c) and
	into utils.c. There was also a duplicate add() function in mf.c which
	has been removed.

2006-01-02  Josh Bressers <josh@bress.net>

	* Remove sbr/pwd.c file, moving the pwd() function into sbr/utils.c.

2006-01-01  Josh Bressers <josh@bress.net>

	* patch #3967: Create a mh_xrealloc function to prevent mistakes when
	calling realloc.

2006-01-01  Josh Bressers <josh@bress.net>

	* patch #3966: Create a mh_xmalloc function to prevent mistakes when
	calling malloc.

2005-12-24  Peter Maydell  <pmaydell@chiark.greenend.org.uk>

	* Bug #15285: Don't use $< in target rules in makefiles, as POSIX
	says it's only defined in inference rules. (BSD make was expanding
	$< to the empty string in the rule for building sbr/dtimep.c, which
	causes lex to apparently hang because it's reading from stdin.)

2005-12-24  Peter Maydell  <pmaydell@chiark.greenend.org.uk>

	* Completely redo db library checking -- we now check for working
	(include file, library) pairs rather than checking for headers and
	libraries separately. We also now provide --with-ndbm=lib and
	--with-ndbmheader=header options to configure to handle situations
	where configure's autodetection fails.

2005-12-21  Peter Maydell  <pmaydell@chiark.greenend.org.uk>

	* Fix stupid accidental dependence on a bash quirk in previous
	configure script change.

2005-12-15  Peter Maydell  <pmaydell@chiark.greenend.org.uk>

	* Improve checking for Berkeley db libraries: configure should now
	find a suitable library on systems with new gdbm where
	compatibility functions are in the gdbm_compat library, and on
	systems with libdb4.

2005-12-13  Michael Forrest <mef@computer.org>

	* Fedora Bug #163760: sbr/context_read.c (context_read): Ensure that
	the context is only read once.

2005-12-12  Josh Bressers <josh@bress.net>

	* uip/sendsbr.c (annoaux): Fix the call to annotate() fixing a bug
	which prevented repl from properly annotating messages.

2005-12-07  Jon Steinhart <nmh@fourwinds.com>

	* Fixed a bug where anno -append put the headers in the wrong place
	if applied to a message that didn't contain any headers.

	* Added a special value of "all" to the -number option that causes
	anno -delete to delete all matching components instead of just
	the first one.

	* Added new -preserve and -nopreserve options.  Using -preserve
	retains the original last accessed and last modified times on
	annotated messages.

2005-12-05  Josh Bressers  <josh@bress.net>

	* Fedora Bug #174983: configure.in: Fix the AC_PATH_PROG default when
	vi isn't found during build.

2005-11-19  Peter Maydell  <pmaydell@chiark.greenend.org.uk>

	* bug #14977: sbr/context_read.c: special case an MHCONTEXT of
	"/dev/null" and don't try to lock it.

	* bug #9228, debian bug #146449: man/mh-profile.man: make it clearer
	that lower case environment variables (and in particular mheditor)
	are internal to nmh and not intended to be set by the user.

2005-11-09  Peter Maydell  <pmaydell@chiark.greenend.org.uk>

	* sbr/mf.c: fix buffer overrun with absurdly long addresses
	(only causes crashes if scan is run with '-width 16536' or similar)

	* bug #7917: sbr/context_foil.c, sbr/context_read.c,
	sbr/context_save.c: mark 'no context' with NULL rather than
	"/dev/null" so we don't	inadvertently try to lock /dev/null (which
	takes up to a minute in some locking configurations and makes post
	very slow).

	* patch #3913: uip/post.c: pass some globals into sm_init() so that
	it uses SASL if	necessary. (This bug was preventing Bcc'd emails
	from being sent via SASL authenticated SMTP.)

	* bug #9813: uip/rmf.c: don't crash if there's no Current-Folder
	entry in the context file.

2005-11-13  Oliver Kiddle  <okiddle@yahoo.co.uk>

	* bug #7833: uip/Makefile.in: remove link to install-mh that caused
	problems on some systems

	* bug #739: Makefile.in: install target now depends on all to avoid
	problem on case-insensitive file systems with the INSTALL file

2005-11-10  Josh Bressers  <josh@bress.net>

	* Fedora Bug #172838: configure.in: Fix the AC_PATH_PROG default when
	sendmail isn't found during build.

2005-11-09  Peter Maydell  <pmaydell@chiark.greenend.org.uk>

	* h/aliasbr.h: fix a non-ANSI prototype.

2005-11-08  Oliver Kiddle  <okiddle@yahoo.co.uk>

	* Simon Burge: acconfig.h, configure.in, uip/rcvtty.c, uip/slocal.c:
	fix to handle getutent() on NetBSD

	* INSTALL, README, docs/README.about, man/nmh.man: update most
	references to the web page and mailing list locations

	* bug #10230: etc/Makefile.in, man/Makefile.in, uip/Makefile.in:
	Michael De La Rue: prepend DESTDIR to install locations

	* configure.in, */Makefile.in, mts/smtp/smtp.c: replace obsolete
	autoconf macros

2005-11-06  Peter Maydell  <pmaydell@chiark.greenend.org.uk>

	* sbr/fmt_rfc2047.c, sbr/fmt_scan.c, h/prototypes.h: fix various
	possible overruns of the buffers in fmt_scan() which would cause
	crashes if scan was run with '-width 16536' or similar.

	* uip/popsbr.c: fix compile error which only showed up if nmh
	was configured with --enable-apop.

	* Debian Bug# 245932, RedHat Bug# 172388: uip/mhparse.c: don't
	crash when handling a multipart MIME message with an invalid
	Content-Type header (file handle was being fclose()d twice).

	* sbr/Makefile.in: adjust lex command to work on both old and
	new versions of flex.

	* configure.in: add an AC_PREREQ() so autoconf 2.13 gives a helpful
	error message and the Debian autoconf-version-guessing wrapper
	doesn't guess wrongly.

2005-11-02  Oliver Kiddle  <okiddle@yahoo.co.uk>

	* Debian Bug# 320069: Nick Rusnov: uip/popsbr.c: fail when
	kpop connection attempted without KPOP support compiled in

	* Debian Bug# 320090: Nick Rusnov: sbr/Makefile.in: fix for newer
	version of flex and remove autogenerated file from cvs

	* patch #1155: uip/flist.c: speed up flist by skipping stat on
	files with numbers as names

	* docs/Makefile.in: include new files in distribution

2005-10-11  Bill Wohler  <wohler@newt.com>

	* docs/FAQ: fold questions into MH FAQ and distribute that instead

2005-10-05  Oliver Kiddle  <okiddle@yahoo.co.uk>

	* Harald Geyer: h/mh.h, uip/replsbr.c: back out previous change
	(fork/vfork) and replace with code that handles the issue directly

2005-05-18  Oliver Kiddle  <okiddle@yahoo.co.uk>

	* Debian Bug# 143485: Nick Rusnov: h/mh.h: use fork instead of
	vfork on Linux

	* Debian Bug# 261592: Harald Geyer: uip/mhlsbr.c, uip/replsbr.c:
	test/report error writing to stdout

	* mts/smtp/smtp.c, uip/popsbr.c: correct SASL include file locations

	* docs/COMPLETION-BASH: bash completion definitions from Debian

	* patch #2863: savannah@brisammon.fastmail.fm: sbr/folder_read.c:
	fix a bug affecting AFS where nmh was setting the READONLY flag
	for a folder even when you do have write access to the folder

	* Carl Mummert: h/fmt_compile.h, man/mh-format.man,
	sbr/fmt_compile.c, sbr/fmt_scan.c: add unquote() function for
	removing quotes from RFC-2822 encoded headers

2005-02-23  Oliver Kiddle  <okiddle@yahoo.co.uk>

	* use iconv to convert RFC-2047 encoded headers to the
	character set used by the current locale

	* sbr/folder_read.c fix Debian bug #202667: crash when a
	message's filename overflows an int when converted

	* Updated config.guess and config.sub to the most recent
	versions (from automake 1.9.5)

2005-02-21  Oliver Kiddle  <okiddle@yahoo.co.uk>

	* sbr/getpass.c fix bug where inc crashed on failing to reopen
	the terminal

2005-01-27  Oliver Kiddle  <okiddle@yahoo.co.uk>

	* Added -proxy option to inc and msgchk. Based on old patch
	from Michael Richardson.

	* On systems where it is available, use nl_langinfo to get the
	character set if MM_CHARSET is unset

2005-01-21  Oliver Kiddle  <okiddle@yahoo.co.uk>

	* sbr/check_charset.c US-ASCII is a subset of UTF-8 so can be
	handled directly when UTF-8 is being used

2004-12-17  Oliver Kiddle  <okiddle@yahoo.co.uk>

	* uip/mhmisc.c Fix -part option to mhshow/mhlist/mhstore to
	find sub-parts of the specified part

2004-11-19  Jon Steinhart  <jon@fourwinds.com>

	* h/prototypes.h, sbr/folder_addmsg.c, uip/mhstoresbr.c,
	uip/rcvstore.c, uip/refile.c: Added mail directory argument to
	folder_addmsg in order to make it possible to provide a path to
	the ext_hook call that is mailpath-based.  A problem existed when
	a folder was a symbolic link and the pwd call would return the
	path relative to the filesystem, not to mailpath.  A new argument
	was needed because there was otherwise no reasonable way to get
	that path.

2004-11-16  Jon Steinhart  <jon@fourwinds.com>

	* sbr/folder_pack.c: Fixed problem where the refile hook was being
	called after a message was renamed so that it wasn't around for
	the hook.  The hook is now called before the message file is
	renamed.

	* sbr/folder_addmsg.c: Fixed wrong directory for hook when
	refiling with -src option.

2004-10-15  Jon Steinhart  <jon@fourwinds.com>

	* uip/sortm.c: Fixed calling of external hooks.

2004-10-12  Jon Steinhart  <jon@fourwinds.com>

	* uip/inc.c: Fixed another weird bug caused by the static
	mailpath being overwritten.

	* uip/sendsbr.c: Fixed bug that caused anno to mangle headers.

	* sbr/lock_file.c: Fixed strange bug that prevented a lock from
	ever being obtained if getting it failed the first time.  The
	problem was that the string of XXXXXX that is required by
	mkstemp() was overwritten the first time through, and so all
	subsequent times failed because mkstemp() failed.  The fix
	reinitializes the tmp file string.

	* uip/inc.c: Fixed bug in which the static maildir was overwritted
	if a format string was read from the profile.

	* sbr/folder_delmsgs.c: Fixed bug that was producing an incorrect
	path for the external hook.

2003-10-06  Glenn Burkhardt <glenn@aoi-industries.com>

	* uip/slocal.c, configure.in: db configuration fix for Debian; yet
	  another location for ndbm.

2003-09-30  Glenn Burkhardt <glenn@aoi-industries.com>

	* Fix 'pick' so handling of options "-list" and "-seq" are
	independent.
	* Fix 'inc' realloc error when bringing in more than 100 msgs
	to empty folder.
	* Patches submitted by Nick Rusnov from Debian archive applied:

	Debian Bug#
	   136976 - Handle binary content messages
	   143427 - mh-format.man typo
	   144098 - 'spost; should have same behavior as 'post'
	            w.r.t. mts.conf masquerade line
	   149745 - slocal ignores 'N' result of previous command
	   152728 - increase SMTP timeouts to conform to RFC 1123
	            The timeouts suggested by the RFC seem long
		    to me - but the RFC is still listed as active.
	   181867 - typo for nmh.man
	
2003-08-10  Jeffrey C Honig  <jch@honig.net>

	* Fix problem where parsing of address/date fields in fmt_compile
	is optimized to the first instance.  The first instance may be in
	contitional code which will result in cached data to
	be used.  Instead, convert c_flags to a flags field from a boolean
	and parse on the first use.
	* Remove some unused flag bits.

Fri Jul 01 22:02:00 2003 Glenn Burkhardt <glenn@aoi-industries.com>

	* Applied fixes for configuration problems with Solaris and
	  systems with gdbm instead of db1 (includes bug #2024)
	* Fixes for bugs 
	  #578  - repl leaks umask 
	  #1393 - sortm core dumps 
	  #1650 - msh leaks file descriptors
	  #1730 - Double free() in mhfree.c:free_encoding()
	  #3356 - In-Reply-To header in default replcomps should be 
	          RFC2822 compliant 
	* Revised man page for mh-format (bug #2031)
	* New replcomps, etc, with Fcc: +outbox in default versions
	
Sat Mar 17 03:18:15 2001 Dan Harkless <dan-nmh@dilvish.speed.net>

	* Ken Hornstein's configure.in Cyrus SASL checks were doing 
	`x"$with_cyrus_sasl" != "no"' instead of `... != x"no"'.

Tue Mar 06 21:04:27 2001 Dan Harkless <dan-nmh@dilvish.speed.net>

	* Found some historical information about MH in RFC 808.
  	Supplemented it with info from Jerry Peek's MH book and added it
 	to docs/README.about.

Tue Feb 6 20:35:40 2001 Shantonu Sen <ssen@mit.edu>

	* sbr/dtime.c Use the same Y2K correction code as dtimep.lex

	* sbr/dtimep.lex Restrict the parser to accept either
	a numerical timezone offset, or a symbolic one (e.g. EST),
	but not both (Since "2000 -400 EDT" might cause a double
	subtraction of 60 minutes if both are parsed. One should be
	enough).

Mon Feb 05 20:22:54 2001 Dan Harkless <dan-nmh@dilvish.speed.net>

	* -L isn't sufficient for specifying the path of the Cyrus SASL
	shared library.  That'll allow us to link successfully, but on
	many/most OSes that won't allow us to find libsasl at runtime.  On
	Solaris, we need to specify the library path with -R as well (or
	else the user will have to use the $LD_LIBRARY_PATH kludge, which
	is considered harmful).  This fix should be extended to other OSes
	as well.

	* Print whether we have SASL support in the "nmh configuration"
	summary configure prints out.

	* Say in README.developers to use `\date' in case anyone is like
 	me and has `date' aliased in their shell to use a nonstandard (but
 	subjectively more readable) format.

Thu Jan 25 21:15:52 2001 Shantonu Sen <ssen@mit.edu>

	* man/mh-chart.man has updated synposes of
	all nmh commands.

Tue Jan 23 20:26:15 2001 Shantonu Sen <ssen@mit.edu>

	* etc/digestcomps tried to force dates into a
	19xx when it's not necessary.
	
Fri Jan 19 21:22:08 2001 Shantonu Sen <ssen@mit.edu>

	* First round of manpage updates finished. They
	are standardized on -man macros, with minimal
	roff mark-up.

	* man/tmac.h.in is no longer needed, since the
	manpages do not depend on them anymore. Note:
	strict "man" programs that didn't allow ".so"
	sourcing outside the man tree will now format
	the man pages correctly.

	* man/vmh.1 is no longer built, since uip/vmh isn't
	
Tue Jan 9 6:01:22 2001 Shantonu Sen <ssen@mit.edu>

	* Finished manpages ali-prev

	* Removed deprecated files from the repository.
	Specifically, those rooted in zotnet/ and mts/sendmail
	mts/mmdf. "cvs update -dP" will give a pruned directory
	structure.

	* Updated docs/Makefile.in to include README.manpages, and
	uip/Makefile.in to include popi.c (which isn't being built,
	though). This allows "make nmhdist" to create an archive that
	is file-for-file identical to the current cvs repository.

Sun Dec 31 20:48:50 2000 Shantonu Sen <ssen@mit.edu>

	* Create docs/README.manpages, which details
	the formatting rules I've been using.

	* Finished ali-inc.
	
Sat Dec 30 9:50:13 2000 Shantonu Sen <ssen@mit.edu>

	* Created a new file "DATE" to hold the date
	of the most recent nmh release. This date will be
	used in the manpages.

	* Updated docs/README.developers to add the step
	of updating DATE. Also, updated configure to
	read in the contents of the file as the variable
	$DATE.

	* Started work on updating man pages, with only
	ali finished so far. Changes: 1) no dependence
	on an external macro file, 2) uses only
	-man macros (although I may be mistaken in this),
	3) syntax in the SYNOPSIS is a little more
	in line with standard UNIX documentation, such as
	bold flags and italicized parameters.

Sun Dec 24 10:06:30 2000 Shantonu Sen <ssen@mit.edu>

	* Updated INSTALL with information about the
	--with-locking option.

	* Fixed the Hesiod tests in configure.in. In
	systems where res_send was in -lresolv, this
	information was not being communicated to the
	HESIOD_LIBS var. Now, if res_send is not found
	in the default libraries, it's assumed to be
	in -lresolv, and thus -lresolv is appended to
	HESIOD_LIBS, which will need that to avoid
	undefined symbols problems.

	* Fixed the Kerberos tests in configure.in. New
	versions of Kerberos 5 have renamed -lcrypto
	to -lk5crypto (circa krb5 1.1 or thereabouts). The
	new test tries to determine if -lk5crypto exists. If so,
	this is a new krb5 system. If not, test for -lcrypto
	and the rest of old krb5. If that fails, look
	for a genuine krb4 installation.
	
Fri Dec 22 22:08:51 2000 Dan Harkless <dan-nmh@dilvish.speed.net>

	* -apop and -noapop were not documented in msgchk.man.
	-snoop was documented but didn't appear in the usage SYNOPSIS.

Fri Dec 22 23:42:16 2000 Shantonu Sen <ssen@mit.edu>

	* Made a new ./configure option called
	"--with-locking" that allows the file
	locking mechanism to be chosen there instead of
	requiring a manual edit of config.h.

	* If the option is not explicitly set, or an
	invalid option is specified, "dot" locking is
	chosen. Valid options are "dot", "fcntl",
	"flock", and "lockf". We need a way to tell
	the user that these are the valid options, and
	change the flag "--with-locking" if it's not
	descriptive enough.

Fri Dec 22 19:21:29 2000 Shantonu Sen <ssen@mit.edu>

	* Remove the lex-specific memory hints at the
	beginning of sbr/dtimep.lex. We've already
	committed to supporting flex only, since
	lex does not easily allow us to parse a single
	string, as well as other problems documented
	below and on nmh-workers.

	* Added a switch statement to configure.in to
	test for Mac OS X. If this is the case, LDFLAGS
	should not contain "-s" since the linker rejects
	the flag.

	* Updated MACHINES to include Mac OS X Public Beta,
	as well as Linux 2.4 running glibc 2.2.

Wed Dec 20 16:00:46 2000 Shantonu Sen <ssen@mit.edu>

	* Marked deprecated directories in docs/README.developers
	as deprecated, with pointers to the new code location.
	Eventually these deprecated directories should go away.

Tue Dec 19 19:16:37 2000 Dan Harkless <dan-nmh@dilvish.speed.net>

	* -apop and -noapop were not documented in inc.man.  -snoop was
	documented but didn't appear in the usage SYNOPSIS.

Thu Dec 14 14:32:09 2000 Shantonu Sen <ssen@mit.edu>

	* Updated config.guess and config.sub to the most recent
	versions on ftp://ftp.gnu.org/pub/gnu/config, dated
	12-07-00. This should prevent configure from failing
	on newer operating systems because config.{guess,sub}
	couldn't correctly identify them.

Thu Dec 14 1:30:44 2000 Shantonu Sen <ssen@mit.edu>

	* Fixed the circular dependency created when I moved
	zotnet/mts to mts/generic and merged them into libmts.
	mts/generic/client.c and mts/generic/mts.c are now in sbr/
	(and thus in libmh), which makes libmh self-contained and
	not depending on an external archive.

	* All include statements now look for mts.h in h/. The
	Makefiles and configure script have been modified so that
	mts/generic is no longer built.

Mon Dec 11 22:08:07 2000 Dan Harkless <dan-nmh@dilvish.speed.net>

	* When Shantonu made the new libmts.a, he swapped $(MTSLIB) and
 	libmh.a in sbr/Makefile.in so that libmh.a comes first, but this
 	causes the build to fail on Solaris, because libmts.a has to get
 	ruserpass() out of libmh.a.  Swapping them back to the way Ken
 	Hornstein's patch (which I applied on Jul 20) put them, with
 	libmh.a correctly coming second.  If there are times when libmts.a
 	needs to come second, then it would appear there's a circular
	dependency and someone (Shantonu?) did an mts merge incorrectly.

Fri Sep 8 01:36:23 2000 Shantonu Sen <ssen@mit.edu>

	* Took out bad time textual time zones like BST and JST.
	I found them online somewhere, but am not sure if they're
	correct.	
	
Fri Sep 8 00:36:48 2000 Shantonu Sen <ssen@mit.edu>

	* Moved zotnet/mts to mts/generic. This code reorganization
	makes the entire zotnet tree deprecated -- bboards is unneeded,
	mf was was moved to sbr, tws was rewritten and moved to sbr, and
	now finally mts.

	* Created a new static library called libmts.a used during
	compilation which includes the generic mts code and the
	smtp/sendmail code. This supercedes the functionality of the
	old libsmtp.a and the remains of libzot.a.

	* Updated header includes to reference the new location of mts.h
	in mts/generic/mts.h. Also, update the configure and top-level
	Makefile not to descend into zotnet. Also, they don't descend
	into mts/mmdf and mts/sendmail (the sendmail code has been
	merged into the smtp code).

	* Added #include <h/nmh.h> to h/md5.h, since my compile was
	complaining about implicitly-declared memcpy and memset, which
	appear to be in strings.h. In any event, nmh.h should take care
	of it for us.

	* When doing a "make nmhdist", notice that the generated
	snapshot does not include zotnet of the mts directories as noted
	above. Since they are no longer compiled, and I don't see any
	obvious code path to get to them, end-users should probably
	not need them. If you think otherwise, turn Makefile generation
	back on in configure.in and turn on recursion into those dirs
	in the appropriate Makefile.in

Wed Sep 6 22:40:03 2000 Shantonu Sen <ssen@mit.edu>

	* Tracked down the problem in the new dtimep where time
	zones were being radically misreported. It was because the
	parser knew about military time zones (such as M or E) but in
	some cases did not know about the textual representation of
	some zones (like MET). When it encountered one of these, the
	date parser misread MET as the military time zone T (well, first
	zone M, then E, and finally T). I took military zones out, and
	things seem much better. Also, the default behavior of parsing
	time zones appears to default to GMT in the absence of better
	info, which is less bogus than assuming the mail came from the
	current time zone, which was the behavior in 1.04.

Thu Aug 10 13:22:13 2000 Dan Harkless <dan-nmh@dilvish.speed.net>

	* Decided that limiting the message number columns to 3 on my
 	scan.MMDDYY and scan.YYYYMMDD (to try to regain space taken by
 	extra date info) was ill-conceived.  It's not that tough to get
 	past 999 messages, though I imagine it's rather rare to exceed
 	9999.  Changed these to 4.  Also put the "replied / encrypted"
	column back in YYYYMMDD -- I've never seen it show anything but a
	space, but that space is useful if you use scan, grep, and awk
	(with the default field separator) to grab message numbers (I know
	-- pick should really be used for these purposes...).

Mon Aug  7 20:11:09 CEST 2000 Ruud de Rooij <ruud@ruud.org>

	* Modify umask set by mhshow to enable user execute bit, so that
	viewers that create temporary directories (e.g., lynx) will be
	able to access them.

Thu Aug 03 17:14:08 2000 Dan Harkless <dan-nmh@dilvish.speed.net>

	* TODO: Allow multiple simultaneous differing contexts, probably
 	each tied to a parent (terminal) process.

Tue Aug  1 10:48:05 EDT 2000 Kimmo Suominen <kim@tac.nyc.ny.us>

	* Makefile install rules should not look for generated files in
 	the source tree -- this will happen to work when configuring and
 	building inside the source tree but will fail when using an
 	external build tree.  Fixed etc/Makefile.in.

Mon Jul 24 16:20:45 2000 Dan Harkless <dan-nmh@dilvish.speed.net>

	* When Shantonu wrote the new, more portable dtimep.lex, he left
	out the #ifdef DSTXXX stuff for some reason.  Not a good idea, as
	that code is required for proper printing of numeric-offset
	timezones that have daylight saving time.  Without that code,
	-0700 during DST gets printed as MST instead of PDT.

	* Renamed DSTXXX as ADJUST_NUMERIC_ONLY_TZ_OFFSETS_WRT_DST and
	added an explanatory comment by its #definition.

	* Updated README.developers with the fact that zotnet/tws is going away.

Thu Jul 20 20:30:52 2000 Dan Harkless <dan-nmh@dilvish.speed.net>

	* Moved Kimmo's new "--with-hash-backup" to be output with the
 	rest of the --with options in the configure --help output.  Also,
	people did not preserve my alphabetization of the --with options
	when they added new ones.  Re-alphabetized.

	* One more pass at README.developers now that it's clear that my
	previously-suggested one-line autoconf-file commit can cause
	unnecessary local makes and an out-of-sync stamp-h.in file, but
	would not cause problems for other people using the CVS files.

	* Ken Hornstein's SASL patch was not integrated properly with
 	Ruud's new merged mts/sendmail code.  Kimmo has since fixed nmh so
 	it compiles, but according to Ken, the SASL stuff still does not
 	work.  Integrating a patch from him for this.

	* Last pass at README.developers -- Kimmo's 5-step commit was
 	overkill.  You only need 3 steps, since configure.in is the only
 	autoconf file with the RCS $Id keyword.

	* Applied Kurt J. Lidl <lidl@eng.us.uu.net>'s $MAILHOST patch:

	    I have a small patch that would be nice to be included --
 	    basically, it allows the usage of the "MAILHOST" environment
 	    variable, without having to have HESIOD turned on.  I need
 	    this functionality for my environment, where we have identical
 	    /usr/local on all my machines (so I cannot just hardcode into
 	    the mts.conf file), and I have multiple POP mail servers for
 	    my users.

	Modified inc.man to reflect that along with "pophost:" and -host, 
	$MAILHOST can now activate POP mail inclusion as well.

	* Fixed warnings from diff on first-time install of nmh.  Also
	added 'echo's clarifying the etc file installation activities.

Tue Jul 18 19:36:59 EDT 2000 Kimmo Suominen <kim@tac.nyc.ny.us>

	* Added the answer to Dan's question in README.developers.

Mon Jul 17 19:10:36 2000 Dan Harkless <dan-nmh@dilvish.speed.net>

	* Clarified and made some corrections to Kimmo's README.developers
	changes (BTW, if anyone can explain why the RCS Ids are able to cause
	problems with the dependencies, please fill in the explanation --
	I never encountered a problem with the old single-commit method).

Sat Jul 15 23:13:49 EDT 2000 Kimmo Suominen <kim@tac.nyc.ny.us>

	* Add configure option --with-hash-backup so the backup prefix can
	be easily changed from "," to "#".

	* Simplified sbr/Makefile.in so that it works with any make.

	* Use mkstemp in sbr/lock_file.c.

	* Commits of autoconf-related files apparently can't all be done
	in one shot due to RCS Ids changing when committing -- updated
	README.developers.

Tue Jul 11 14:18:01 2000 Dan Harkless <dan-nmh@dilvish.speed.net>

	* Clarified post.man and send.man for those not completely up on
	SASL terminology.  "SASL encryption layers are not supported for
	SMTP" means that encryption is supported for the authentication
	but not for the subsequent data stream.

Sat Jul  8 01:36:19 EDT 2000 Kimmo Suominen <kim@tac.nyc.ny.us>

	* Applied Ken Hornstein <kenh@cmf.nrl.navy.mil>'s patches
 	implementing SASL support for POP3 and SMTP.  If nmh is compiled
 	with SASL support, using the -sasl switch on the inc, msgchk,
 	post, and send commands will enable authentication encryption for
 	SMTP, and both authentication and data stream encryption for POP3.

Sat Jun 10 18:37:59 CEST 2000 Ruud de Rooij <ruud@ruud.org>

	* Merged mts/sendmail functionality into mts/smtp; switching between
	smtp and sendmail delivery method is now controlled by mts.conf.

	* If tsort cannot deal with loops, in addition to defining tsort as
	cat, also define lorder as echo.
	
	* Removed uip/popi.c from list of sources.

Thu Jun 08 19:36:57 2000 Dan Harkless <dan-nmh@dilvish.speed.net>

	* New dtimep.lex didn't parse day names properly.  Fixed.  Also
 	clarified ambiguous comments preceding day_map[] array (from old
 	dtimep.lex) that probably led to the erroneous cp++ being added.

Wed Jun  7 20:52:33 CEST 2000 Ruud de Rooij <ruud@ruud.org>

	* Added one more mkstemp invocation to uip/spost.c (which was in a
	#if 0 block).

	* Applied patch from Peter Maydell to clean up permissions handling
	and error handling in uip/inc.c.

Mon Jun  5 22:10:07 CEST 2000 Ruud de Rooij <ruud@ruud.org>

	* Use cat instead of tsort if tsort cannot deal with loops in its
	input (which is the case for tsort from GNU textutils).

Mon Jun  5 21:14:36 CEST 2000 Ruud de Rooij <ruud@ruud.org>

	* If lockfile is present, and its dotlockfile program is setgid,
	inc does not need to be setgid.

Sun Jun  4 21:35:40 CEST 2000 Ruud de Rooij <ruud@ruud.org>

	* Added autoconf test for Miquel van Smoorenburg's liblockfile
	library, as found on Debian systems.

	* Added liblockfile support to sbr/lock_file.c.
	
Wed May 31 7:19:30 2000 Shantonu Sen <ssen@mit.edu>
	
	* Fixed up dtimep.lex a bit. Added back memory options for AIX to
	increase available memory.  Took out %option noyywrap, which
	wasn't understood by AT&T lex, as well as the -i
	case-insensitivity flag.

Wed May 31 07:40:45 2000 Doug Morris <doug@mhost.com>

	* Added a lint target to the Makefiles and a check in autoconf
	to determine whether lint or lclint exists on the system. 

Fri May 30 19:21:48 2000 Dan Harkless <dan-nmh@dilvish.speed.net>

	* etc/Makefile.in was incorrectly installing mts.conf.in and
 	sendfiles.in -- fixed.  Generated sendfiles script was not a
 	dependency of the `all' target, and was incorrectly included in
 	the distribution.  Changed the suffix for the backed-up previous
 	versions of the etc files from the ambiguous .old to .prev.  Added
 	call to diff -- only keep the .prev files around if different from
 	the newly-installed versions (intentionally didn't redirect output
 	to /dev/null so you'll notice when your changed versions are
 	getting moved aside).

	* INSTALL never documented the etc/*.old thing.  Documented the
	new etc/*.prev thing (including a note to watch for diff output).

	* Applied Alec Wolman <wolman@cs.washington.edu>'s dropsbr.c patch:

	    In the map_write routine, a call is made to map_open and this
 	    call is supposed to set the "clear" variable to 0 or 1,
 	    depending on whether the map file is empty or not.  In
 	    mh6.8.3, this worked because map_open would set "clear" by
 	    calling the mbx_Xopen routine.  In nmh, the code for mbx_Xopen
 	    was merged into mbx_open, but the interface for mbx_open
 	    doesn't support the clear variable, so that functionality was
 	    lost.  The map_open interface still contains "int *clear" in
 	    the prototype, but never sets it.

	    My patch eliminates "clear" from the map_open interface (I
 	    checked to make sure that map_write is the only client of
 	    map_open).  Furthermore, my patch also sets the "clear"
 	    variable properly at the beginning of map_write by calling
 	    fstat().  This eliminates the bug in that the value of "clear"
 	    being used later in the routine was just stack garbage.

	    Having a bad value of clear causes this next bug to be
 	    triggered: The fp file pointer was being opened with fdopen,
 	    but in two of the three switch cases it wasn't being closed.
  	    In certain cases, this was causing packf to run out of file
 	    descriptors if you attempted to pack a large folder.

Mon May 29 7:48:15 2000 Shantonu Sen <ssen@mit.edu>

	* Moved the date parsing routines from zotnet/tws to sbr/ (and
	tws.h to h/). Updated all source files to reflect to new location
	of tws.h.

	* Rewrote dparsetime (in dtimep.lex -> dtimep.c) to replace the
 	old zotnet/tws/dtimep.c, dtimep.lex, lexstring.c, lexedit.c, and
 	dtimep.c-lexed. It should now work with flex (although untested
 	with lex), and requires no sed-ing. For now, I have the lexed
 	version in the distribution, so that end-users don't need to worry
 	about running it through flex/lex. I have not added back support
 	for guessing the time zone when it's not specified.
	
Sun May 28 17:44:15 CEST 2000 Ruud de Rooij <ruud@ruud.org>

	* Added autoconf check for getutent().

	* Changed uip/rcvtty.c and uip/slocal.c to use getutent() and
	friends.  Since I can only check on Linux, please check if
	this works on other systems.

Sun May 28 14:58:49 CEST 2000 Ruud de Rooij <ruud@ruud.org>

	* Applied patch from Peter Maydell to uip/scansbr.c for more
	checks for write failures.

	* Unlink temporary file properly in uip/rcvtty.c.

	* Moved viamail from bindir to libdir.

	* Changed sendfiles into sendfiles.in, so that path to viamail
	is patched in.

	* Added gzip support to sendfiles.

	* Added References header to replcomps and replgroupcomps.

Sun May 28 14:39:31 CEST 2000 Ruud de Rooij <ruud@ruud.org>

	* Fixed m_getfld bug which caused segmentation faults when
	incorporating messages which ended in multiple linefeeds crossing
	a buffer boundary.

Fri May 26 13:21:59 2000 Dan Harkless <dan-nmh@dilvish.speed.net>

	* msh has been unable to show MIME messages ever since 1.0.  Alec
	Wolman <wolman@cs.washington.edu> tracked down the problem to the
	-show flag being passed to mhshow.  mhshow is equivalent to the
	old mhn -show, so we don't need the -show anymore.  Removed it.

Fri May 12 02:51:21 2000 Shantonu Sen <ssen@mit.edu>

	* zotnet/bboards is not longer built by default. Goal is to move
	the assorted functions in zotnet into sbr or some more logical
	place.

	* Moved zotnet/mf to sbr, and changed mf.h references accordingly,
	as well as Makefiles.
	
Thu May 11 02:21:34 2000 Shantonu Sen <ssen@mit.edu>

	* Simplified sbr/Makefile.in so that both SRCS and OBJS aren't
	seperately and redundantly defined, but so that OBJS is a
	pattern-substituted version of SRCS with suffix .c -> .o. This
	should make maintainability easier.

	* Added section to MACHINES indicating what platforms nmh is known
	to compile and work on, just to give users peace of mind, or
	something. This is by no means complete or exhaustive, so add
	whatever you know works.
	
Tue May 09 20:38:04 2000 Dan Harkless <dan-nmh@dilvish.speed.net>

	* Alphabetized Shantonu's $pop_kinds output on configure's "pop is
	enabled" line.  If POP3 is the only kind of POP enabled, say so,
	rather than just saying "yes" (which is ambiguous).

	* Fixed four warnings in Shantonu's new getpass.c.  Needed to
 	#include <stdlib.h> for calloc(), <unistd.h> for ttyname(), and
 	"h/mh.h" for adios().  Also changed ch from char to int to get rid
 	of "comparison is always 1 due to limited range of data type" on EOF.

	* Added steps to README.developers saying to change the version
	number to X.Y.Z+dev.  Did a little rearranging and changed the FTP
	dir from /home/ftp to /var/ftp to reflect Doug's new machine.

	* Changed configure.in to use gcc -Wall even without
	--enable-debug, to prevent developers compiling optimized from
	introducing warnings, and to give end-users a warm, fuzzy feeling
	as they (hopefully) see no warnings come out (except perhaps on
	the lex output file) even with -Wall.

	* Renamed getpass() to nmh_getpass() since the prototype for
 	getpass() varies from OS to OS, and we want to _always_ use our
 	version of the function.  Fixed all the callers to use
 	nmh_getpass() and added it to prototypes.h.  Semi-arbitrarily
 	upped MAX_PASSWORD_LEN from 128 to 256.  buf was being calloc()'d
 	and the memory leaked -- should have just been declared as static
 	char array.  Prepended "Portions of this code are" to the
 	copyright message, as this version has been changed significantly
 	from the BSD version.

	* Added "nmh-local functions to use in preference to OS versions"
	section to README.developers (currently just says to use
	nmh_getpass() instead of system getpass()).

	* Prepended "Portions of this code are" to the copyright message
	in ruserpass.c also.

	* Added mts.conf.5 page per Neil W Rickert <rickert+nmh@cs.niu.edu>'s
	report:
	
	    This happens on solaris:

		     % man mts.conf
		     windex entry incorrect:  mts.conf(5) not found.
		     No manual entry for mts.conf.

	    It is fixed by

		     % echo ".so man5/mh-tailor.5" > mts.conf.5

	    done in the man5 directory.  We need to add 'mts.conf.5' as a
	    reference sourcing mh-tailor.5.
	
Mon May 08 23:51:55 2000 Dan Harkless <dan-nmh@dilvish.speed.net>

	* Doug informed me that the way I had restored the "lost" version
	histories was wrong, because `cvs checkout's of old versions of
	nmh wouldn't work properly.  It occurs to me that this could be
	fixed by simply deleting those tags in the new-location *,v files,
	but oh well.  I'm putting everything back to the way Doug
	originally had it.  To get the old version history for a file that
	used to be in the top directory, you'll need to "blindly" do a
	`cvs log' there (even though you won't have a local copy of the
	file in that directory).  `cvs diff' will no longer be able to
	diff pre-move versions vs. post-move versions -- you'll have to do
	a lot of manual gyrations with `cvs checkout' and then use `diff'.

	* I had alphabetized the --configure options in the --help output
 	awhile back, but Shantonu added --enable-apop just under
 	--enable-pop.  Put it in alphabetical order and clarified what
 	--enable-apop does vs. --enable-pop and --with-krb4.  Also changed
	--with-mts help line from "mail transport agent" to "mail
	transport agent/service" so the 's' in "mts" doesn't seem to come
	out of nowhere.

	* Added two steps to "releasing nmh" in README.developers.  After
 	making the tarball, it's a good idea to diff the tree vs. the CVS
 	tree to make sure no files got left out, and then to chown the
 	files so that they're owned by root, preventing a Trojaning attack
 	by a malicious remote user with a UID matching yours.

	* Changed DIFFERENCES to say that RPOP is not currently supported
	rather than implying it by saying that APOP, KPOP, and POP[3] are.

Sun May 07 18:16:43 2000 Shantonu Sen <ssen@mit.edu>

	* Imported NetBSD version of getpass() and made extensive
	revisions for compatibility with programs that pipe the password
	to stdin, such as exmh.

	* Removed tests for system ruserpass() which sometimes gave
	phantom positive results. Also, bext to use internal functions if
	we ever want to change .netrc format to something else, or access
	other files.

Sat May 06 08:28:09 2000 Dan Harkless <dan-nmh@dilvish.speed.net>

	* Restored lost version histories for those moved files by doing a
	manual `mv' in the CVSROOT on mhost.  CVS badly needs a `cvs mv'
	command so that you can move files (without having physical access
	to the CVSROOT) without losing versioning.  Put MACHINES back at
	the top level as it needs to be read before building.  Fixed DIST
	variable in {.,docs}/Makefile.in to reflect that and to add
	missing entry for "INSTALL" file.

Sat May 06 13:13:07 2000 Doug Morris <doug@mhost.com>

	* Re-cleaned up nmh documentation (by moving things to docs
 	subdir) and modified Makefile & configure.in to handle the change.

Mon Apr 17 21:28:40 2000 Dan Harkless <dan-nmh@dilvish.speed.net>

	* Scott Blachowicz pointed out that the configure --help output
	for --enable-masquerade was misleading.  Clarified.
	
Mon Apr 17 19:01:00 2000 Shantonu Sen <ssen@mit.edu>

	* APOP support can be compiled in to inc and msgchk using
	--enable-apop.

	* To access an APOP host, specify -apop on the command line
	along with any -host or -user option.

Fri Apr 14 23:10:44 2000 Dan Harkless <dan-nmh@dilvish.speed.net>

	* Upped the version number to 1.0.4+dev until the next nmh release.

	* Added a "releasing nmh" section to README.developers, while the
 	process was fresh in my mind.
	
Fri Apr 14 18:21:34 2000 Dan Harkless <dan-nmh@dilvish.speed.net>

	* Added new files README.developers, ChangeLog_MH-3_to_MH-6.6, and
	ChangeLog_MH-6.7.0_to_MH-6.8.4.html to DIST target in Makefile.in.
	
	* Released nmh-1.0.4.

Tue Apr 11 21:37:03 2000 Dan Harkless <dan-nmh@dilvish.speed.net>

	* Applied Brian Campbell <bacam@tardis.ed.ac.uk>'s mhn.defaults.sh
	patch:

	    It appears that there shouldn't be quotes around the %s in the
 	    iso-8859-1 charset entry; xterm passes the remaining arguments
 	    to the program, quoting them means that xterm thinks they're
 	    part of the program's name.

	This %s isn't the same as the "Insert content subtype" one from
	mhshow-show-* -- it doesn't come from MIME headers and is safe not
	to quote.

Sun Apr 09 13:03:59 2000 Doug Morris <doug@mhost.com>

	* added check in fmt_compile() to handle a single-character
	format string. fmt_compile() depends on having an array of
	format characters with an empty item at the end. A
	single-character format would cause programs using this
	function to segfault because the algorithm used to decide on
	the length of the array mistakenly created a single-item array
	when the format string was one character. This eventually
	caused problems when the program attempted to test item+1
	in the array.

Thu Apr 06 21:53:50 2000 Dan Harkless <dan-nmh@dilvish.speed.net>

	* Richard Coleman threw out a lot of old MH-specific files in nmh.
  	Much of the stuff, indeed, is not worth saving, but there are
 	nuggets that are very worthwhile, and should probably be added
 	back in.  Most important, IMHO, are the MH change logs, as they
 	can help answer questions like "Why is this code like this?" or
 	"How long has this been broken?" or "What was this ever used for?"

	I've added a new file to the nmh tree called
 	ChangeLog_MH-3_to_MH-6.6.  It's cobbled together from the
 	mh-6.8.4/papers/mh*/MHCHANGES files.  I've re-ordered the entries
 	to go from newest at the top to oldest at the bottom to match the
 	ChangeLog convention.  Unfortunately there are no change logs for
 	versions of MH prior to 3 in the MH tar files available at
 	<ftp://ftp.ics.uci.edu/pub/mh>.  Also, it appears to me that there
 	are MH-6.6 changes that aren't documented in the logs.

	I've also added ChangeLog_MH-6.7.0_to_MH-6.8.4.html.  This is
 	based on mh-6.8.4/papers/changes/mh-changes.ms.  The nroff format
 	and its "catman"-type output are a pain to deal with, but I was
 	loath to throw away the formatting, so I converted the file to
 	HTML.  The only actual markup in the body are the "<B>" and "<U>"
 	tags, and "&lt;" and "&gt;" instead of '<' and '>', so it's quite
 	doable to view the file in plain ASCII mode as well.  Note that
 	some of the changes this file documents as having been made in
 	MH-6.8.4 may not be present in nmh -- Richard started with 6.8.3
	and later put in certain 6.8.4 stuff.
	
Wed Apr 05 21:09:28 2000 Dan Harkless <dan-nmh@dilvish.speed.net>

	* Applied Eric Schnoebelen <eric@cirr.com>'s mhshowsbr.c patch
 	fixing apparent bugs in Dan Winship's new security quoting code:
	
            Since upgrading, I've been getting the following errors
            while attempting to process some MIME messages:

                (1) Syntax error: Unterminated quoted string
                    exit 2
	
            and:

                (2) line 1/10 (END)Segmentation fault (core dumped)

	    (2) appears to be due to the testing of an unset pointer in
	    mhshowsbr.c:show_multi_aux().  (1) appears to be caused by
	    mis-quoting a filename being handed to the shell in
	    mhshowsbr.c:show_content_aux().

	    Resolving the pointer reference issue in
 	    mhshowsbr.c:show_multi_aux() turned up a similar mis-quoting
 	    problem in the routine.

Tue Mar 28 16:17:39 2000 Doug Morris <doug@mhost.com>

	* Applied Todd.Miller@courtesan.com's patch to dropsbr.c to
 	prevent core dumping on packf. Here's the note from his message:

	    Since sizeof(buffer) == sizeof(tmpbuffer) packf will dump
	    core on a file w/o a From line with a line >= BUFSIZ.
	    I noticed this because I had a junk file in my mail
	    spool somehow.

Fri Mar 17 11:59:33 2000 Dan Harkless <dan-nmh@dilvish.speed.net>

	* wesley.craig@umich.edu did not document his previous KPOP patch,
	so I did so, and asked him to check what I wrote.  Unfortunately
	he didn't notice my misunderstanding of his patch.  I wrote that
	if you #define POPSERVICE "kpop", inc and msgchk will use KPOP
	exclusively, but if you leave it as "pop3", you can use Wesley's
	new -kpop switch on a given invocation.  Instead, however, -kpop
	turned out to be necessary on every invocation, and a KPOP user
	complained.  Applied Wesley's new patch, which makes things work
	like I thought his original patch did.  After that, did one more
	clarifying pass to the documentation in inc.man and msgchk.man.

Wed Mar 15 18:45:45 2000 Dan Harkless <dan-nmh@dilvish.speed.net>

	* When I fixed the long-standing makedir() bugs in January, I had
 	the code call strtoul(..., 0), which I believed to be safe as all
 	modes specified as ASCII constants in the nmh code started with a
 	leading zero (signifying octal), which I did as it would work if
 	internal constants were ever changed to hex.  Unfortunately I was
 	unaware of the "Folder-Protect:" .mh_profile entry, which
 	mh-profile.man documents as an octal-only constant, with no
 	leading zero required.  I've changed the strtoul() call to an
 	atooi() call and removed the misleading leading zeroes on the
 	ASCII octal constants in the code and man pages.  Also changed the
 	"Folder-Protect:" example in the man page to something more
 	interesting than a duplication of the default.

	* When I added my --enable-masquerade option, you'll note that I
 	didn't make it --enable-nmh-masquerade.  I find the --enable-nmh-*
 	options too wordy and I'm not sure why Richard went that route.
  	I've renamed them to just --enable-*, but the old versions will
 	still work as well (they just aren't advertised).

	* Added a line to the "nmh configuration" output saying whether
	POP is enabled.

	* Added a new README.developers file.  From the file:

	    This file is intended to provide a few tips for anyone doing
 	    development on nmh.  Developers who learn things "the hard
 	    way" about the nmh codebase (as opposed to local info best
 	    encoded in a comment) are encouraged to share their wisdom
 	    here.

	Currently the topics are "autoconf files" and "directory structure".

Tue Mar 14 12:41:48 2000 Dan Harkless <dan-nmh@dilvish.speed.net>

	* Applied, after some finessing,
	Simon Burge <simonb@thistledown.com.au>'s --with-smtpservers patch:

	    Here's a patch that allows you to add

		    --with-smtpservers=<some.host.name>

	    to the ./configure command line to set the "servers: " line in
 	    etc/mts.conf.  Around here, we use "mailhost" so that all
 	    machines in the current domain just talk to a central machine
 	    and nothing else runs an MTA.  Now, I can use

		    --with-smtpservers=mailhost

	    instead of having to remember to fix this by hand (and often
 	    forgetting to do so!).

	* Inspired by Simon's patch, added an --enable-masquerade option
	to configure.  It will set the "masquerade:" line of mts.conf.
	You may specify a subset of the three types of masquerading, like
	--enable-masquerade="draft_from mmailid", or leave off explicit
	arguments to enable all three types.

	* Alphabetized the --enable and --with options in configure.in and
	INSTALL and added documentation of the two new options to the latter.

	* Added new dependency for mts.conf: Makefile.  If this isn't
 	done, then when you reconfigure nmh with new values for
 	--enable-masquerade or --with-smtpservers, you'll fail to get an
 	updated copy of mts.conf.

	* Applied Simon Burge <simonb@thistledown.com.au>'s dtimep.lex patch:

	    It seems that some MUA's didn't handle y2k very well - ELM
 	    seems to be one of them, and Ultrix's DXmail (based on MH!).
  	    I've got a few emails this month that look like:

		    575   Jan 00  Xxxxxx Xxxx       3603  ...
	    and
		     22+  Jan 00  Xxx Xxxxx         1771  ...

	    The first has "15 Jan 100" as the date and the second has 
	    "19 Jan 00" as the date.  The following works around this so 
	    that scan, show, sortm, etc work ok.

	I put Simon's patch under the control of a new #define called
	FIX_NON_Y2K_COMPLIANT_MUA_DATES.  There's some commentary in
	acconfig.h about when you might not want to #define it.

	* Created new dtimep.c-lexed with Simon's change using dtimep.lex
	lexed on Solaris 2.6.  Added missing dependency in
	zotnet/tws/Makefile.in for dtimep.c: dtimep.c-lexed.

	* Added scan.MMDDYY and scan.YYYYMMDD format files.

Mon Mar 13 21:32:00 2000 Dan Harkless <dan-nmh@dilvish.speed.net>

	* Applied Sullivan N. Beck <sbeck@cise.ufl.edu>'s mhshow-suffix patch:

            With the patch below, you can add lines like:

                mhshow-suffix-application/msword: .doc
                mhshow-suffix-application/PostScript: .ps

            to the mhn.defaults file to append the given suffix to a
 	    scratch file.  This allows applications which require a
 	    certain suffix to run properly.

	* Removed -force_html from lynx entry in mhn.defaults.sh (I
 	believe older versions of lynx lack that option) and added
 	"mhshow-suffix-text/html: .html".
		
	* Modified username_extension masquerading to only use the
	extended address on generated [Resent-]From: lines and SMTP
	envelope From:.  With Neil's original implementation, nmh's global
	idea of the username was changed, which would result in inc lying
	and saying you had no new mail because it was looking for a
	mailbox called, for instance, "dan-nmh" (where username was "dan"
	and $USERNAME_EXTENSION was "-nmh").
		
	* Applied Simon Burge <simonb@thistledown.com.au>'s dtime.c patch:
	
	    There's a wrap-around problem that affects the implementation
	    of Zeller's congruence in dtime.c.  This causes the day-of-week
	    calculations to fail for dates after Feb 29, 2000 (probably up
	    until some year far in the future).

Mon Mar 06 12:20:20 2000 Dan Harkless <dan-nmh@dilvish.speed.net>

	* Applied Neil W Rickert <rickert+nmh@cs.niu.edu>'s msh.c patch:

            I finally tracked down the problem in msh that was causing
 	    errors whenever I tried to examine a 'mmdf' style mailbox.

	    It turns out that not enough memory was being allocated with
 	    calloc(), causing memory pointers to be overwritten and
 	    corrupted.
		
Fri Mar 03 16:07:33 2000 Dan Harkless <dan-nmh@dilvish.speed.net>

	* Changed the new "plussed_user" option to mts.conf's
 	"masquerade:" to "username_extension" after getting feedback from
 	qmail users, who use '-' as a separator rather than '+'.  Removed
 	checking of $USERPLUS variable.  Now check $USERNAME_EXTENSION,
 	which needs to include the appropriate separator for your MTA
 	('-', '+', or whatever) as its first character.
		
Thu Mar 02 23:04:30 2000 Dan Harkless <dan-nmh@dilvish.speed.net>

	* Added a new "boolean" type to mh.h and TRUE and FALSE constants.
		
	* Added a note to DIFFERENCES stating that it's out-of-date
	(Richard was the last one to update it) and that we should
 	consider only documenting incompatibilities with MH there.

	* Implemented (and documented) a third kind of username
 	masquerading: "plussed user" masquerading.  This one was suggested
 	by Neil Rickert <rickert+nmh@cs.niu.edu>.  It's based on sendmail's
 	"plussed user" feature, where mail sent to <user>+<string> will be
 	delivered to <user>.  When it's enabled, it's controlled by the
 	$USERPLUS environment variable.  How is it enabled?  Well, that
	leads me to:

	* Renamed the "mmailid:" setting in mts.conf to "masquerade:", and
 	changed it so that rather than being a boolean, it can be set to
 	any combination of the three values "draft_from", "mmailid", and
 	"plussed_user".  Thus it is now possible to enable the three types
	of masquerading individually.

	* Fixed a bug with "mmailid" masquerading (dating back to MH?)
 	where if it was turned on, ','s would no longer be considered
	GECOS field delimiters.
	
Wed Mar 01 23:30:50 2000 Dan Harkless <dan-nmh@dilvish.speed.net>

	* Changed the GECOS-field '&' translation behavior to be
 	controlled by the BSD42 #define rather than GCOS_HACK, since it's
 	apparently always appropriate on OSes where BSD42 is #defined, and
 	never appropriate on any other OSes.  Thanks to Kimmo Suominen for
 	responding to my "What is this code here for?" comment in mts.c
 	and explaining the feature.
	
Mon Feb 28 21:50:29 2000 Dan Harkless <dan-nmh@dilvish.speed.net>

	* Upped the version number to 1.0.3+dev (ideally this should be
 	done by whoever makes a release tar file, immediately after doing
 	so).
	
	* Applied Paul Fox <pgf-spam@foxharp.boston.ma.us>'s scansbr.c
 	patch, posted to comp.mail.mh, which he says prevents loss of mail
 	when inc'ing into a full filesystem.

	* Changed "echo > stamp-h.in" in Makefile.in to "date > stamp-h.in"
	so that stamp-h.in will be different each time configure.in and
	related files are changed, making it easier to check it in (which
	is necessary to prevent unnecessary autoconf calls).

	* My declaration of initgroups() in slocal.c to eliminate the "no
 	prototype" warning wasn't portable (FreeBSD 3.[23] choked).  Now
 	use AC_EGREP_HEADER to see where initgroups() is declared, if
 	anywhere.

Sun Feb 20 12:17:15 2000 Ruud de Rooij <ruud@ruud.org>

	* Fix security hole in mhshowsbr.c which allowed untrusted shell
	  code to be executed.
	
	* Released nmh 1.0.3.

Thu Feb 10 10:54:36 2000 Dan Harkless <dan-nmh@dilvish.speed.net>

	* Oops.  %-escapes on mhstore lines in mhn.defaults.sh should not
	be surrounded by single quotes, as a shell is not spawned when
	just saving files, and the filenames will end up with literal
	quotes embedded in them.

Fri Feb 04 12:29:12 2000 Dan Harkless <dan-nmh@dilvish.speed.net>

	* Whoever originally added the -help switch to all the commands
 	got too cute and had the option itself print out as "-(help)" in
 	the -help output.  One theory is that they were making reference
 	to the fact that clearly you know about the -help option since
 	you're currently looking at its output.  I think it's a bad idea
 	to overload the meaning of the parentheses, however -- they're
 	supposed to indicate what abbreviated prefix of the switch you're
 	allowed to specify.

	The other theory is that because you can say something like
	"mhstore -" and get "mhstore: - ambiguous.  It matches" followed
	by the same list of switches you get with -help, they were saying
	you can "sorta" abbreviate "-help" as "-".  You don't get the
	"Usage:" string, though, so it's not really the same thing.

Thu Feb 03 17:52:01 2000 Dan Harkless <dan-nmh@dilvish.speed.net>

	* Applied wesley.craig@umich.edu's KPOP patches.  According to him:

              The following patch fixes a problem with requesting a
 	      service key for a machine that has multiple 'A' records.  It
 	      also makes "-kpop" a command line option, for users who
 	      would like to use both "kpop" and "pop".

	Did no testing of the new features, as I don't have access to a
 	KPOP server.

	* Modified inc.man and msgchk.man to document Wesley's new -kpop.

	* Modified INSTALL and config.h.in to reflect the new -kpop feature.

Fri Jan 28 17:39:24 2000 Dan Harkless <dan-nmh@dilvish.speed.net>

	* All %-escapes in mhn.defaults that actually expand to something
	should be surrounded by single quotes.  Added quotes to the ones
	in mhn.defaults.sh that were missing them.

	* Added check for lynx to write mhshow-show-text/html line in
	mhn.defaults.sh.

Thu Jan 27 12:22:25 2000 Dan Harkless <dan-nmh@dilvish.speed.net>

	* makedir() had multiple bugs dating back to MH.  An octal
 	constant was apparently being interpreted as decimal, resulting in
 	directories with no user read or execute permissions, making
 	nested directory creation fail.  And there wasn't even an
 	_attempt_ to set desired permissions (e.g. from "Folder-Protect:"
 	in .mh_profile) on the outer directories of a nested directory.

	* A second `make install' would always fail because the check for
	whether mh_profile.5 existed was written incorrectly.
	
Wed Jan 26 02:22:00 2000 Dan Harkless <dan-nmh@dilvish.speed.net>

	* Added documentation on both types of masquerading to post's man
 	page.

Tue Jan 25 22:58:12 2000 Dan Harkless <dan-nmh@dilvish.speed.net>

	* Doug's portability fix of my setgid inc autodetection had a
 	caching bug -- if you re-ran configure, uip/Makefile would be
 	corrupted, and installation would bomb out on OSes where inc needs
 	to be setgid.

	* Implemented a new kind of email address masquerading.  Usually,
 	when a user writes a custom "From:" header in a draft, nmh uses it
 	rather than generating one.  However, the user's true address is
 	used in the SMTP envelope "From:" and is revealed in the "Sender:"
 	header.  Now, when mmailid is set to non-zero, the envelope
 	"From:" uses the address specified in the draft "From:" header,
 	and there is no "Sender:" header.  This is useful when sending on
 	behalf of a remote POP3 account or when remote mail robots
 	incorrectly use the envelope "From:" in preference to the body
 	"From:".  This processing has only been implemented for post, not
 	for the undocumented spost (which was already missing some "From:"
 	processing that post has).

Mon Jan 24 22:26:06 2000 Dan Harkless <dan-nmh@dilvish.speed.net>

	* Got rid of the rest of the gcc -Wall warnings that I didn't have
 	time for on 1999-07-15 (and, it would seem, some new ones people
 	introduced since then).  The primary ones were the warnings that
 	default prototypes were being used for [v]snprintf() and
 	str[n]casecmp().  As of right now, there are _no_ compilation
 	warnings except on dtimep.c-lexed (at least under AIX 4.1.5 and
 	Solaris 2.6).

Sun Jan 2 23:42:18 2000 Ruud de Rooij <ruud@ruud.org>

	* Move mhtest from bindir to libdir.

	* Move sendfiles from libdir to bindir.

	* Updated sendfiles manpage to reflect this change.

	* Added documentation for -build and -file switches to repl and 
	  forw manpages (patch from Peter Maydell).

	* Fixed interaction between specifying -cc in profile and -group on 
	  command-line.

Tue Nov 1 13:48:10 1999 Dan Harkless <dan-nmh@dilvish.speed.net>

	* Changed the version number from 1.0.3 to 1.0.2+dev.  There was
	not unanimous support for my proposed even/odd release/developer
	version number dichotomy.  1.0.2+dev implies release 1.0.2 plus
	some development.

Fri Oct 29 13:42:51 1999 Dan Harkless <dan-nmh@dilvish.speed.net>

	* Upped the version number to 1.0.3.  If we don't do this, then
	when people report bugs against 1.0.2, we won't know "which" 1.0.2
	they're talking about (since the development source is publically
	available via CVS).  I think the Linux kernel version numbers are
	a good model, so the next time we roll a tarball, it should be
	version 1.0.4 (or higher -- anyhow, an even-numbered version).

Fri Oct 29 06:41:08 1999 Doug Morris <doug@mhost.com>

	* Released nmh-1.0.2.

Tue Oct 26 22:57:00 1999 Doug Morris <doug@mhost.com>
	
	* Added check for whether "libtool" is in fact gnu libtool. If
	it is, it is not used. This is the wrong behavior. If vendor
	XYZ later on decides to create yet another libtool, we'll be
	caught again. This works for now.

	* Minor updates to MACHINES refering to Mac OS X.

Thu Oct 21 20:45:37 1999 Doug Morris <doug@mhost.com>

	* Added check for "libtool" (a ranlib type tool for Mac OS X)
 	and modified Makefiles so that nmh will build under Mac OS X.

Sun Oct 17 08:28:56 1999 Ruud de Rooij <ruud@ruud.org>

	* Changed repl defaults to partly revert to MH behaviour,
	  "-cc all" is now only implied with -group.

	* The replcomps template includes cc: header again (as in MH).

	* Updated repl man page to reflect these changes.

Sat Oct 16 02:57:47 1999 Doug Morris <doug@mhost.com>

	* Tweaked configure to handle Solaris and SunOS after the BIND
	changes. Both need more cleanup.

Sat Oct 16 00:17:36 1999 Doug Morris <doug@mhost.com>

	* Removed BIND define and replaced it with a check for
	gethostbyname (to determine if the host is DNS aware) and a
	check for sethostent. This appears to be the right thing to
	do, but there is no explanation of the reasoning behind the
	BIND define in the code and it appears to have been used for
	multiple purposes. 

Wed Oct 13 15:53:53 1999 Doug Morris <doug@mhost.com>

	* Updated manpages Makefile to link mh-profile.5 to
	mh_profile.5 after installation. Suggestion from Richard Cohen
        <richard@jubjub.demon.co.uk>.

	* Modified configure.in to check for _IO_write_ptr and libio.h
	to determine whether to define LINUX_STDIO instead of using 
	config.guess.

Mon Oct 4 15:22:46 1999 Dan Harkless <dan-nmh@dilvish.speed.net>

	* Added '-L' to the calls of 'ls' in configure.in -- I have seen
 	multiple machines in the past where the mail spool was a symlink
 	to a directory on another device with more free space.

Fri Oct 1 22:36:56 1999 Dan Harkless <dan-nmh@dilvish.speed.net>

	* Fixed a portability problem in Doug's fix of a portability
	problem in my MAILGROUP autoconf support ('ls -l' vs. 'ls -lg'). 

Sat Sep 25 18:40:43 1999 Ruud de Rooij <ruud@ruud.org>

	* Added config.sub and config.guess to the list of files to be
	distributed.

	* Fixed bug in sbr/fmt_scan.c where an extra newline would be
	added if a list of addresses was split over several header lines.

	* In mts/smtp/smtp.c, undefine strlen and strcpy if they are
	macros, regardless of platform.

	* Allow q to quit mhshow, and n to skip to next part.  Patch from
	Kimmo Suominen <kim@tac.nyc.ny.us>.

	* Modified mhstore to recognize attachments created by sendfiles
	with x-conversions=gzip.

Mon Sep 13 21:20:10 1999 Doug Morris <doug@mhost.com>

	* added explicit cast to long from time_t for tclock in
	post.c.

	* Commented out #ifdefs for <sys/ioctl.h> in termsbr.c since
	it's needed for ioctl() anyway. This prevents a warning about
	implicit definition of ioctl().

	* Moved guesses performed by AC_CANONICAL_SYSTEM back into the
	"User Configuration" section of config.h (moved @TOP@ in
	acconfig.h) so they're easier to find, should someone actually
	want to mess with them.

Sun Sep 12 15:50:34 1999 Doug Morris <doug@mhost.com>

	* updated Makefile.in so it recognized COMPLETION-TCSH and
	COMPLETION-ZSH (only used in make nmhdist). 

	* added prototype for ruserpas to <h/prototypes.h>. Fixes
	warnings in mhparse.c and mhbuildsbr.c.

	* added include checks for <time.h> and <sys/time.h> to
	prevent warnings in fmt_compile.c, fmt_scan.c, lock_file.c,
	sendsbr.c, mhbuildsbr.c, mhcachesbr.c, picksbr.c, and post.c.

	* added include for <zotnet/mts/mts.h> to ali.c, scan.c, ap.c,
	rcvdist.c, rcvstore.c, rcvtty.c, and spost.c to remove
	warnings about implicit definition of mts_init().

	* added <grps.h> to slocal.c to prevent warnings about
	function initgroups.

	* added <h/signals.h> to prevent warning about missing SIGNAL
	function.

	* added function prototypes to smtp.c, whatnowproc.c,
	mhbuildsbr.c, mhparse.c, mshcmds.c, show.c, whatnow.c, mhl.c
	to fix warnings.

	* explicitly declared mbx_style in mshcmds.c and lused in
	fmtdump.c as type static int instead of just static to
	prevent warnings.
	
	* various code cleanups to prevent ambiguous statements
	(brackets for if/thens and parens for complicated if
	statements).


Sun Sep 12 09:19:27 1999 Doug Morris <doug@mhost.com>

	* commented out _cleanup() in mf.c because it's the only
 	location in all of the source code where it exists. It was
	preventing compilation on at least linux.

	* Added check for <db1/ndbm.h> which is the new location where
	linux systems appear to be stuffing this header file.

Thu Sep 09 23:15:49 1999 Doug Morris <doug@mhost.com>

	* fixed varous mkstmep bugs introduced in 1.0.1 by me. Whups!

	* added mh_profile SEGV patch from Richard Cohen
        <richard@jubjub.demon.co.uk> that prevents crashing when
        mh_profile doesn't end in a newline. A similar patch was
	previously sent in by Andrew Bettison <andrewb@zip.com.au>.

	* fixed bug in associated with MAILGROUP #define (group "mail"
	is not universal) -- hard to believe, but true.

Tue Sep 7 16:47:03 1999 Dan Harkless <dan-nmh@dilvish.speed.net>

	* Renamed ZSH.COMPLETION to COMPLETION-ZSH and added COMPLETION-TCSH.

Tue Aug 17 16:06:29 1999 Dan Harkless <dan-nmh@dilvish.speed.net>

	* Automated #define of MAILGROUP and installation of inc as setgid mail
	when the mail spool directory isn't world-writable.

Thu Jul 15 18:37:07 1999 Dan Harkless <dan-nmh@dilvish.speed.net>

	* slocal -debug used to leave a file in /tmp for each message
	processed.  Very bad for folks with slocal -debug in their .forward!

	* Got rid of a ton of compilation warnings.  Most were "junk"
 	warnings due to the use of gcc -Wall (without -Wno-parentheses),
 	but a few represented real bugs.  There remain many warnings to be
 	tackled that are due to missing function prototypes (e.g. snprintf()).

	* Default rcvdistcomps no longer puts a copy of all outgoing
 	messages in outbox.  Added an rcvdistcomps.outbox that does.

Sat Jun 09 12:22:47 1999 Doug Morris <doug@mhost.com>

	* Updated configure to check for mkstemp (available on OpenBSD) and 
	substitute it for mktemp if available. 

Thu May 13 16:40:19 1999  Doug Morris <doug@mhost.com>

	* Added config.sub and config.guess and updated acconfig.h and
	configure.in to automatically detect system type and set the
	proper #defines.

Wed May 12 23:41:33 1999  Dan Winship  <danw@mit.edu>

	* Released nmh-1.0.1.

Fri May  7 17:18:28 1999  Dan Winship  <danw@mit.edu>

	* Fixed flist to properly deal with relative folder names.
	Problem noted by Jerry Peek <jpeek@jpeek.com>.

	* Fixed --with-krb4 to work with original Kerberos 4 libraries as
	well as the Kerberos 5 compat libraries. Based on a patch from
	Assar Westerlund <assar@sics.se>.

	* Added a check in configure.in to test if modf is in libc and
	link with libm if not. This is needed by at least Digital UNIX. 
	Problem pointed out by Kevin Oberman <oberman@es.net>.

	* Fix a bug from the "mhn -show" to "mhshow" renaming that
	made the "list" command in whatnow not work for some users.
	From Ruud de Rooij <r.c.m.derooij@twi.tudelft.nl>.

	* Replaced "extern int errno" with "#include <errno.h>" in a
	number of files. Suggested by Stephen Wilson Bailey
	<swb@nconnect.net>.

	* Fixed a problem in how "packf -mbox" translated "Return-Path:"
	lines. From Kimmo Suominen <kim@tac.nyc.ny.us>.

	* Fixed a segmentation fault in inc. Patch originally from Ruud de
	Rooij <r.c.m.derooij@twi.tudelft.nl>.

	* Allow display of 8bit encoded messages. From Kimmo Suominen
	<kim@tac.nyc.ny.us>.

	* Fixed repl to not add line breaks in the middle of long
	addresses when building a reply. From Ruud de Rooij
	<r.c.m.derooij@twi.tudelft.nl>.

	* Added -library switch to spost so it can parse user aliases like
	post does. From Ruud de Rooij <r.c.m.derooij@twi.tudelft.nl>.

	* Changed configure.in's check for sigsetjmp to properly deal
	with systems like Linux where it is a macro. From
	<elleron@servtech.com>.

	* Fixed a bug in whatnow that could cause it to sometimes exit
	without prompting the user. Based on a patch by Richard Geiger
	<rmg@netapp.com>.

	* Added code to deal with SIGPIPE in mhl so it doesn't print
	"Broken pipe" if you quit out of the moreproc.

	* Documentation: Added a note to MACHINES about Irix make. Added a
	pointer to the online copy of the MH book in INSTALL. Added
	some additional information to the whatnow and packf man pages,
	suggested by Jerry Peek <jpeek@jpeek.com>.

	* Updated INSTALL, FAQ, etc to not refer to Richard as the
	maintainer or math.gatech.edu as the home any more.

1999-02-06  Richard Coleman  <coleman@math.gatech.edu>

	* Released nmh-1.0.

	* Merged mbx_open and mbx_Xopen in dropsbr.c.  Fixed
	  mbx_open so that the mode of zero length maildrops
	  would not be changed.

	* Replaced the substitute version of snprintf() with the
	  one from the Apache web server.

	* Changed to default mode for creating new messages to 0600
	  (this should have been done a long time ago).

	* Changed "flist" to handle searching for multiple sequences
	  for each folder.  Also flist will now correctly split
	  Unseen-Sequence if it consists of multiple sequences.

	* Added new switches `-unlink' and `-nounlink' to "refile".

	* Added new switches `-unlink' and `-nounlink' to "rmm".

	* More cleanups of slocal output.  Changed adorn() to
	  send to stdout, instead of stderr (to match rest of
	  verbose printing).

	* Merged mbx_create() into mbx_open, so that creating and
	  opening a nonexistent maildrop is done atomically.  This
	  removes a bad race condition.

	* Fixed bug that caused slocal to be unable to save to MMDF
	  style drop file.

	* Added new wrapper function usr_folder() to slocal.c to
	  handle adding message to folder (currently, it still uses
	  usr_pipe() to call rcvstore).

	* seq_list() checks for empty folder before scanning for
	  sequence information.

	* num_digits() in flist.c and folder.c now returns correct
	  value for 0.  Also added sanity check.

	* folder_delmsgs() now correctly decrements internal message
	  count.

	* Don't attempt to read sequence information if folder
	  is empty.

	* Split seq_read into seq_public and seq_private.

	* Small change to sigmsg.awk, since newer versions of gawk
	  interpret 034 as octal.

	* In flist, don't scan for sequence information in empty folder.

	* Updated mhn.defaults.sh to output profile entries for mhshow,
	  mhstore, and mhbuild.

	* Changed configuration parameter "mhn-access-ftp" to
	  "nmh-access-ftp".  Updated man pages

	* Moved the code in InitMultipart to reverse the order of the
	  parts in a multipart, into its own function "reverse_parts()".

	* Changed code in mhbuildsbr.c to store unencoded content
	  in the c_cefile structure when building.

	* Changed code in mhoutsbr.c to look for unencoded content
	  in the c_cefile structure when outputing message.

	* Changed configuration parameter "mhn-cache" and
	  "mhn-private-cache", to "nmh-cache" and "nmh-private-cache",
	  since it is used in mhstore, mhlist, and mhshow.  Updated man pages

	* Change configuration parameter "mhn-storage" to
	  "nmh-storage", since it is now used in mhstore, mhlist,
	  and mhshow.  Updated man pages

	* Add autoconf support for KPOP (kerberized pop).

	* Add autoconf support for Hesiod.

	* Split routines to output a message given a Content structure
	  (output_message, output_content, write7Bit, etc..) to a new
	  file "mhoutsbr.c".

	* Split output_content(), into output_content() and build_headers().

	* Changed copy_some_headers() in mhstoresbr.c, to use the linked
	  list of header fields, rather than reopening the message.

	* Added free_header() to mhfree.c to free structures containing
	  header field information.

	* Changed get_content() to use the linked list of header fields
	  when parsing the various MIME headers (Content-XXX).

	* Changed get_content() to store linked list of header field
	  values when parsing a content.

	* Changed mhbuild, mhn, mhlist, mhshow, mhstore, to use the
	  routines in mhcachesbr.c to handle the content cache.

	* Split various funtions (find_cache, find_cache_aux, find_cache_aux2,
	  cache_content) into new file mhcachesbr.c.

	* More calls to sprintf/strcpy (primarily in mhparse.c
	  and mhbuildsbr.c) converted to snprintf/strncpy.

	* When a message is displayed with `mhshow', it is now
	  removed from the "unseen" sequence.

	* Change the default "showmimeproc" to "mhshow".

	* Split "mhn -show" off into separate command "mhshow".

	* Split "mhn -store" off into separate command "mhstore".

	* Split "mhn -list" off into separate command "mhlist".

	* Add sanity checks to context_find(), context_replace(),
	  and context_del(), to abort if context file hasn't been
	  read.

	* Add calls to context_read(), to the beginning of all nmh
	  commands (instead of being called indirectly by context_find).

	* Changes the "substitute" version of vsnprintf/snprintf for
	  operating systems without native versions, to just call the
	  native vsprintf(), and ignore the buffer length.   This is
	  faster, but less secure than the previous version that used
	  temporary files.  This should only be a problem for systems
	  which do not have a native snprintf(), and require `inc' to
	  be setuid/setgid.

	* Lots more calls to sprintf/strcpy converted to snprintf/strncpy.

	* Changes client() routine to take additional parameter, which is
	  the buffer length of the parameter "response".  Then added
	  buffer length checks for this parameter.

	* Changed getws() to get_fields(), since that is apparently the
	  name of a wide character version of gets() on some archetitures.

	* Lots of sprintf/strcpy calls converted to snprintf/strncpy.

	* Change the code in most of the commands that take multiple
	  message names/sequences/ranges on the command, such that
	  the msgs array is expanded dynamically.  This removes most
	  of the limits on the length of command lines.

	* Add additional parameter to copyip(), to specify the
	  maximum number of strings that can be copied (security
	  fix).

	* Create new function getarguments(), to massage the argument
	  vector before parsing it (add any arguments from your
	  profile to the beginning of the argument vector).  This
	  also removed the general limit on the number of command line
	  arguments.

1998-07-04  Richard Coleman  <coleman@math.gatech.edu>

	* Released nmh-0.27.

	* Added a new command "delete", that is available during
	  a "whatnow" session.  It is equivalent to "quit -delete".

	* Added another parameter to editfile (in whatnowsbr.c),
	  that controls whether editfile should remember the last
	  program that was exec'ed.  This way the whatnow command
	  "mime", will not be re-executed if "edit" is later given
	  with no arguments.

	* Changed whatnowsbr.c, so that whatnow doesn't abort if
	  mhbuild returns an error.

	* Added parameter to sendsbr(), so you may specify whether to
	  rename the draft file.

	* Pass delay time to splitmsg() as a parameter, rather than
	  use a global variable.

	* Moved code to rename draft file after sending message from
	  splitmsg and sendaux, to sendsbr.

	* Removed all the code in viamail to split messages and then
	  mail them.  Replaced this with the standard sendsbr.c routines.

	* Changed sendsbr(), so that when splitting messages into
	  messages of type "message/partial", the header fields that
	  are copied are more compliant with RFC-2046.

	* Fixed mhbuild to track temporary files better.  They are
	  now correctly removed when mhbuild aborts.

	* Created a new man page for "sendfiles".  The information
	  about "mhn -viamail" in the "mhn" man page was moved to
	  this new page.

	* Changed the name of the "viamail" shell script to
	  "sendfiles".  Modified "sendfiles" to use the new
	  viamail program.

	* Moved the functionality for "mhn -viamail" out of mhn,
	  and into a separate executable called "viamail".

	* When storing MIME contents to a folder using mhn -store,
	  they are now accumulated in a temporary file, and then added
	  to the folder using folder_addmsg().

	* Moved code to save content to a folder from store_content
	  to new function output_content_folder.

	* Moved code to save content to file from store_content to
	  new function output_content_file.

	* Moved code to parse storage format string from store_content
	  to new function parse_format_string.

	* Fix copy_some_headers() in mhstoresbr.c, so that the
	  correct header fields in the first enclosing message/partial
	  will be copied (according to RFC2046), when using mhn -store
	  to reassemble messages of type message/partial.

	* Fixed bug to openFTP() in mhparse.c, that caused the
	  tmp file to not be removed, when transferring a
	  message/external file from ftp.

	* Moved the code in mhparse.c to process -auto switch (scan
	  contents for the attribute "name"), to a new function
	  "get_storeproc" in mhstoresbr.c.

	* Moved routines to free data structures related to MIME
	  content from mhparse.c and mhbuildsbr.c, to new file
	  mhfree.c.

	* Moved code to show/display MIME content into new
	  file mhshowsbr.c.

	* Moved code to store MIME content from into
	  new file mhstoresbr.c

	* Moved code to parse MIME content into new
	  file mhparse.c.

	* Moved code to list information about MIME content
	  into new file mhlistsbr.c.

	* Move part_ok(), type_ok(), content_error(), flush_errors(),
	  and set_endian() to new file mhmisc.c.

	* Start to isolate the code to show, list, and store MIME
	  messages.  One side effect is that only one flag (-show,
	  -list, or -store) can be used at a time now.

	* mhn -store -auto wasn't storing file in correct directory.

	* Removed a few dead variables from sbr/ruserpass.c

	* move code for creating tmp files, and renaming the
	  the composition draft in mhbuild, from build_mime()
	  to main().

	* remove left-over code in mhbuild.c, mhbuildsbr.c, for
	  the -[no]auto switch (which isn't used in mhbuild).

	* split mhn.c into mhn.c and mhnsbr.c (name later changed
	  to mhparse.c).

	* split mhbuild.c into mhbuild.c and mhbuildsbr.c.

1998-05-25  Richard Coleman  <coleman@math.gatech.edu>

	* Released nmh-0.26.

	* Added (unlisted) options [no]dashstuffing to send, post,
	  and whatnow to determine whether to do RFC934 quoting
	  (dashstuffing) for encapsulated BCC messages.  The default
	  is still the same (dashstuffing).

	* Changed the undocumented feature "nodashmunging" in forw
	  and mhl, into the documented feature "nodashstuffing".  The
	  default for forw, is still "dashstuffing" for backward
	  compatibility, although I don't believe that bursting
	  RFC934 digests is very common anymore.

	* Added an option to define REALLYDUMB in the default config.h.
	  But it is not on by default.

	* moved creation of config file mts.conf from zotnet/mts
	  to etc.  This simplified the Makefile in zotnet/mts.

	* simplified directory support/general to etc.

	* removed unneeded directory support/bboards.

	* split getusername() into getusername() and getuserinfo().

	* Changed getusr() routine to getusername().

	* Slight cleanup in folder_pack.c on code that records the new
	  number of the "cur" message when packing.

1998-05-08  Richard Coleman  <coleman@math.gatech.edu>

	* Released nmh-0.25.

	* Change install process, so that hard linking the correct mts
	  library to libmts.a, is not necessary.  The final link process
	  uses the original name of the library.

	* Fixed bug in flist.c and folder.c, so that symbolic links which
	  point to directories, will not decrement the number of directory
	  links remaining.

	* Split the function list_content (in mhn.c and mhbuild.c) into
	  list_content and list_debug.

	* Don't pack (folder -pack) an empty folder.

	* Exit gracefully in flist.c, if no sequence is specified,
	  and no "Unseen-Sequence" is given in nmh profile.

1998-02-27  Richard Coleman  <coleman@math.gatech.edu>

	* Released nmh-0.24.

	* Small clarification to the man page for `ali'.

	* Fix bug in inc.c so that if both flags `-file' and `-truncate'
	  are given, that order doesn't matter.

	* Fix bug in seq_list.c when realloc'ing for
	  large sequence line.

1998-02-23  Richard Coleman  <coleman@math.gatech.edu>

	* Released nmh-0.23.

	* Add new section on "Transfer Encodings" to man page for mhbuild.

	* In mhbuild.c, split compose_content into compose_content
	  (parse and execute composition string), and scan_content (scan
 	  content, decided transfer encoding, check for clash with boundary
 	  string).  I did a good amount of rearranging of this code.

	* Moved definitions for data structures for parsing MIME
	  messages from mhn.c and mhbuild.c to a new include
	  file h/mhnsbr.h.

	* Small amount of rearranging in sendsbr.c

	* Small changes to MAIL.FILTERING file.

	* Add the file MAIL.FILTERING to nmh distribution.

	* Add line to packf so that if message begins with
	  "X-Envelope-From:" field, it is converted to "From ".

	* Fix packf to add "From " line to beginning of message,
	  even if Return-Path doesn't exist.

	* Add note to MACHINES file that on Linux, configure
	  doesn't find the functions sigsetjmp/siglongjmp.

	* Fix configuration for machines that don't have (or find)
	  sigsetjmp/siglongjmp.

1998-02-11  Richard Coleman  <coleman@math.gatech.edu>

	* Released nmh-0.22.

	* Add a configure check for sigsetjmp.  Add some conditional
	  #define's in h/signals.h in case it's not found.

	* Added additional notes about -auto switch in mhn man page.

	* Added note about MM_CHARSET environment variable to
	  mh-profile(5) man page.

	* Fix signal problem in mhn.c (change setjmp/longjmp to
	  sigsetjmp/siglongjmp).

1998-02-09  Richard Coleman  <coleman@math.gatech.edu>

	* Released nmh-0.22-pre1.

	* Changed the first line in mhl.format from
	  " -- using template mhl.format -- " to a blank line.

	* Added note about automimeproc to mh-profile man page.

	* Reorganize the main entry point for parsing a MIME message
	  or file in mhn.  Add new function parse_file() as new main
	  entry point for parsing MIME files.

	* Add note to mhn man page, that "mhn -file -" will accept the
	  source message on the standard input.

	* Changed a sanity check in folder_realloc that was too strict.

	* -norfc934mode is now the default for mhbuild,
	  rather than -rfc934mode.

	* Fix mhbuild, so that Content-Description and RFC-822 comments
	  from #forw directive will be correctly included if there is
	  only one message.

	* Change mhn to correctly default parts of multipart/digest to
	  message/rfc822 (leftover code from rfc934mode was removed).

	* Restore HP specific code to zotnet/tws/lexstring.c.  Apparently
	  it is still needed.

1998-02-06  Richard Coleman  <coleman@math.gatech.edu>

	* Released nmh-0.21.

	* If the file given to mhbuild is "-", then accept the draft on
	  standard input, and output the MIME message to standard output.

	* Cleaned up code in mhbuild.c that decides what transfer
	  encoding to use.

	* Cleaned up code in mhbuild.c that decides what character set
	  to use for text contents.

	* Removed old hpux specific code from zotnet/tws/lexstring.c

1998-02-02  Richard Coleman  <coleman@math.gatech.edu>

	* Released nmh-0.21-pre2.

	* Added the "decode" variable to mhl.format and mhl.header.

	* Added new variable "decode" to mhlsbr.c to decode text in
	  header fields as per RFC-2047.

	* Make sure that when decoding RFC-2047 header fields, that any
	  spaces at the ends of the encoded text are not ignored, but the
	  spaces between encoded word are.

	* Removed #ifdef's for MIME.  MIME support is always compiled in.

	* scan/inc will now decode both Subject and From lines as
	  RFC-2047 encoded header fields.

	* Added new function write_charset_8bit() to sbr.  It returns
	  the character set to use for 8bit text in composition draft.
	  Changed mhbuild to use this function.

	* Split mhn man page into man pages for mhn and mhbuild.

	* mhn -show will only now only use default method for content
	  of type plain, if it is NOT a part of a multipart/alternative.

	* Split mhn -build into mhbuild.  Did some code cleanup.

	* Added support for %(decode) to fmtdump.c.

	* check_charset() now accepts US-ASCII as a subset of any
	  ISO-8859-X character set.

	* Changed the default "showproc" to mhl, instead of the
	  pager more.

	* When reading file into mhn composition file, only need read
	  permissions, not write permissions.

	* Added own version of strcasecmp to distribution, since
	  nmh calls it frequently with NULL pointers (ughh).

	* Replaced uleq.c with strcasecmp.  Removed uleq.c from
	  distribution.

1998-01-22  Richard Coleman  <coleman@math.gatech.edu>

	* Released nmh-0.21-pre1.

	* If a message is missing charset parameter to text/plain, show
	  will assume US-ASCII, rather than just calling showmimeproc.

	* Change show.c and mshcmds.c to use check_charset to see if text
	  message contains valid character set.

	* Added new scan format file "scan.nomime" to support/general
	  that doesn't do any RFC-2047 decoding.

	* Modified all the scan format files in support/general to do
	  RFC-2047 decoding of Subject field.

	* Did more work on sbr/fmt_rfc2047.c, so that it will correctly
	  ignore whitespace between two valid encoded words, but not
	  between an encoded word and normal text.

	* Created new file sbr/check_charset.c.  Moved code from
	  fmt_rfc2047.c to check for valid character set to this file.

	* Added format escape %(decode) to decode contents of "str" register
	  as a RFC-2047 header field.

	* The command install-mh now recognizes the switches -version
	  and -help.

	* Added a new argument to print_help.c to decide whether to
	  print profile entries (needed for install-mh to prevent weird
	  loops).

	* Changed folder_read.c and folder_realloc.c so that mp->lowoff
	  is initialize to max (mp->lowmsg, 1) rather than always 1.

	* Changed macros for sequence/attribute manipulation so that
	  message status array doesn't need to always start at 1.

	* Small cleanups in folder_realloc().

1998-01-09  Richard Coleman  <coleman@math.gatech.edu>

	* Released nmh-0.20.

	* Added configure option --with-pager=PAGER.

	* Added configure option --with-editor=EDITOR.

	* Changed the default format file for mhl (mhl.format) to
	  also ignore (not display) the header fields Content-Type,
	  Content-Transfer-Encoding, and Content-ID

	* Fixed core dump in addrsbr.c when using %(proper) format function
	  and the To: line was missing.

	* Added the file ZSH.COMPLETION to the distribution.

1998-01-04  Richard Coleman  <coleman@math.gatech.edu>

	* Released nmh-0.20-pre2.

	* Added new switch -snoop to both `msgchk' and `inc', so you can
	  watch the POP transaction.

	* Changed "replgroupcomps" to check for Mail-Followup-To header
	  first, and use it if available.

	* Changed "replcomps" to check for Mail-Reply-To header
	  first, and use it if available.

1998-01-03  Richard Coleman  <coleman@math.gatech.edu>

	* Released nmh-0.20-pre1.

	* Changed seq_list.c to dynamically enlarge the buffer for
	  collecting the message ranges in a long sequence line.
	  This should remove the last hard limit on the size of a
	  sequence line.

	* Changed seq_read.c so that can read long sequence lines.
	  It will use multiple calls to m_getfld() when m_getfld()
	  returns the state FLDPLUS.

	* Changed brkstring.c to dynamically add more space for pointers
	  if necessary.  This is needed when splitting up large sequence
	  lines.

	* Did some small cleanups in seq_save.c.

	* Added new switches `-[no]unseen' to rcvstore, to control
	  whether new messages are added to Unseen-Sequence.

	* Moved locking routines (zotnet/mts/lock.c) to sbr/lock_file.c

	* Changed the internal UNSEEN flag to SELECT_UNSEEN which is
	  more appropriate.  Changed the MHPATH flag to ALLOW_NEW.

	* Changed "replcomps" to not include CC and TO lines so that
	  that reply message is only directed at the author of the
	  message to which you are replying.

	* Added new switch `-group' to command repl, which causes repl
	  to use new forms file "replgroupcomps".  This is intended for
	  making group replies.

	* Removed #ifdef for ATHENA.

1997-12-28  Richard Coleman  <coleman@math.gatech.edu>

	* Released nmh-0.19.

	* Fix repl,forw so that switch `-form file' will not abort
	  as ambiguious (silly mistake on my part).

	* Cleaned up the mhn man page.  Added info about a few escapes
	  for the formatting/display strings that were not documented
	  (%%, %t).  Moved the BNF grammar for the mime composition file,
	  to the end of the man page.

	* Added the options -[no]format to the command repl.  The
	  switch `-format' will filter the message to which you are
	  replying with the standard message filter "mhl.reply", which
	  is now included in the distribution.  The `-noformat' option
	  will negate the use of -format or -filter and not include
	  the message to which you are replying in the draft.

	* Did some cleaning and reorganization on many of the man
	  pages.

	* Added debugging switch `-debug' to mhparam, which displays
	  the values of all `procs' (and some other misc configuration
	  info) that nmh keeps in global variables.

	* When using `refile -preserve', if a conflict occurs, then use
	  the next available number above the message number you wish
	  to preserve.

	* In forw.c, split the code for creating MIME style forwarding
	  out of copy_draft, and into copy_mime_draft.

	* Move routines in mark.c to print sequences, into new
	  file sbr/seq_print.c

	* flist will now update the current folder.

	* Added the switches -[no]fast to flist, to replace
	  -[no]total.  The previous switches are still accepted
	  but now undocumented.

	* More reorganization in flist of the code for
	  traversing folders.

	* The command "flist +foo -all" will now scan the folder
	  "foo" and all its 1st level children.

	* Add missing include file <h/mh.h> to sbr/snprintf.c

	* Fix alarm bug in rcvtty, so that when it calls external
	  process, the alarm is never longer than 30 minutes.

1997-12-17  Richard Coleman  <coleman@math.gatech.edu>

	* Released nmh-0.18.

	* Fixed bug in mark, so that "mark -list -seq foo" will
	  correctly indicate if "foo" is a private sequence.  I found
	  this bug mentioned in Jerry Peek's book.

	* Simplified the code in seq_setcur(), since seq_addmsg() now
	  retains the public/private status of sequences.

	* Changed sequence handling so that if the switches -public
	  or -nopublic, are not specified for the commands mark, pick,
	  or rcvstore, then existing sequences will retain their
	  previous public/private status.

	* mhparam now handles the mh-sequences profile entry
	  correctly.

	* flist -all will now also check readonly folders (for
	  private sequences).

	* Improve the leaf optimization for folder command.
	  It will now track the number of directories in a folder,
	  and stop stat'ing files once it has hit all the subfolders.

	* Renamed m_getfolder to getfolder.  Changed getfolder to
	  take option to determine whether it should get current
	  folder, or just default folder (Inbox).  Changed rcvstore,
	  inc, and rmf to use the new getfolder.

	* flist now indicates if a sequence is private.

	* Change WUNTRACED to 0, in pidwait.c, so that commands will
	  wait for stopped processes.

	* conflict will dynamically allocate space for group names,
	  so it can now handle system with more than 100 groups.

1997-12-09  Richard Coleman  <coleman@math.gatech.edu>

	* Released nmh-0.18-pre4.

	* Check if we have enough message status space, before we
	  call folder_realloc() in burst, mhpath, and m_draft().

	* mhn will now correctly identify a formatting string of "-"
	  for the option -store, and send content to stdout.

	* Change the way that memory for message status is
	  allocated.  It is dynamcially allocated separately from
	  the folder/message structure.  This required changing
	  folder_read.c, folder_realloc.c, folder_free.c.

	* Removed all the MTR code (experimental code for message
	  status allocation).

	* Renamed m_readfolder.c to folder_read.c and simplified
	  the code.

	* Renamed m_freefolder.c to folder_free.c.

	* Add function trim() to slocal.c to pretty print
	  the debugging output.

	* Changed the name of m_packfolder() to folder_pack().
	  Changed the name of m_remsg() to folder_realloc().

Wed Dec  3 23:33:38 1997  Richard Coleman  <coleman@math.gatech.edu>

	* Released nmh-0.18-pre3.

	* Changed installation to add `flists' which is hard linked
	  to `flist'.  This is a equivalent to `flist -all'.

	* For flist, -showzero is on by default.

	* Major changes to flist.  Default is now for flist to search
	  current folder.  The switch `-all' is now used to specify
	  searching all top level folders.  The new switch `-showzero'
	  is used to print out folders that don't contain any messages
	  in the given sequence.

	* Split BuildFolderList in flist.c into 2 functions
	  (BuildFolderList, BuildFolderListR).  Changed these functions
	  so that flist now does better leaf optimization, and will stop
	  stat'ing directory entries when it knows it has hit all the
	  subdirectories of a given directory.

	* Reorganized code in folder.c, so that all relevant folders
	  are scanned first and information recorded.  Then all the
	  folder summaries at printed out at one time.

	* Made the options of folder(s) more orthogonal.  Now
	  "folder -all -noheader -nototal" will do the right thing.

	* Added `-noall' switch to folder, for completeness.

	* Changed the default mode for creation of new folders
	  to 0700 (was 0711).

	* Slightly changed the format for flist.  It now indicates
	  if a folder is current.  Also the width of the various
	  fields are now calculated at runtime.

	* Changed the format for folder(s).  Folder names
	  are now left justified.  The width of the various fields
	  are calculated at runtime.

Sun Nov 30 19:14:53 1997  Richard Coleman  <coleman@math.gatech.edu>

	* Released nmh-0.18-pre2.

	* Add paragraph to man page for install-mh and to INSTALL file
	  about checking for global mh.profile.

	* Renamed m_find() to context_find().
	  Renamed m_replace() to context_replace().
	  Renamed m_delete() to context_del().
	  Renamed m_update() to context_save().
	  Renamed m_getdefs() to context_read().
	  Renamed m_foil() to context_foil().

	* Change rcvstore to use routine folder_addmsg(), instead of
	  adding message to folder itself.

	* Changed refile, so that if the switch -preserve is used,
	  and a conflict occurs for a particular folder, then folder_addmsg()
	  will just use next highest available number for that folder,
	  instead of exiting.

	* Make folder_addmsg() more robust.  It will make repeated
	  attempts to link file into folder if link returns with
	  the error EEXIST.

	* Fix bug, so that that if forking sendmail, HELO will be sent
	  unless clientname: option is defined but empty (so now it
	  is the same as the direct smtp code).

	* Changed sprintb to snprintb (now we pass the buffer length
	  to new routine).  Changed code to use new function.

	* Added snprintf to sbr. Added configure check to build it
	  if you don't have a native version (but haven't changed much
	  code to use it yet).

Thu Nov 13 18:42:18 1997  Richard Coleman  <coleman@math.gatech.edu>

	* Released nmh-0.18-pre1.

	* Fixed alarm bug in slocal, so that alarm is never
	  called with a value larger than 30 mintues.

	* Fixed race condition in rmm and refile, so that
	  context is updated before external rmmproc is called.

	* Removed all the OVERHEAD code.

	* Move code to add message to folder from refile.c
	  to folder_addmsg.c

Fri Jul 25 19:39:29 1997  Richard Coleman  <coleman@math.gatech.edu>

	* Did some rearranging of the internals of inc.c.

	* Make -inplace the default for anno, forw, dist, and repl.

	* Changed --enable-smtp to --with-mts={smtp,sendmail}

	* Created new directory mts/sendmail for direct sendmail
	  interface (although it currently still uses SMTP).

	* Removed all the TMA (trusted mail agent) code

	* Removed all the TTYD (terminal access daemon) code

	* Removed all the MF (uucp filtering) code.

	* Removed all the code for BERK.

	* Removed all the code for stand-alone delivery (MHMTS).

	* Split the file mts/sendmail/smail.c into sendmail.c and
	  smtp.c.  Changed the name of the directory to mts/smtp.

	* Changed autoconf to use @sysconfdir@ for location of
	  configuration files.

	* Changed #define in mhn.c from FTP to BUILTIN_FTP.

Mon Jul 21 03:22:34 1997  Richard Coleman  <coleman@math.gatech.edu>

	* Released nmh-0.17.

	* MAKEDEFS weren't passed down to recursive makes correctly.

	* slocal.c now checks for UTMP_FILE and _PATH_UTMP instead
	  of hard-coding "/etc/utmp".

	* rcvtty.c check for _PATH_UTMP if UTMP_FILE is not
	  defined.

	* Remove configure checks for ulong and ushort.  Changed
	  code to just use unsigned {short, long}.

	* Change addmsg function in refile.c to return new
	  number of refiled message.

	* Added check in get_returnpath for empty unixbuf.

	* Cleanup of sbr/pidstatus to use more POSIX macros
	  for return value of wait().

	* Change configure to also check /bin for "more".

Sat Jul 12 00:02:23 1997  Richard Coleman  <coleman@math.gatech.edu>

	* Released nmh-0.16.

Mon Jun 23 20:13:24 1997  Richard Coleman  <coleman@math.gatech.edu>

	* Added automimeproc, which should replace automhnproc.

	* multipart messages will no longer abort for messages
	  of type 8bit or binary (although we still can't really
	  deal with binary messages, yet).

	* Fix double free of c_storage.  From John MacMillan.

	* mhn now treats unknown subtypes of "text" as text/plain.

	* mhn changed so that specifying mhn-show-multipart, or
	  mhn-show-multipart/{mixed, alternate, etc...) will override
	  the use of the internal method for displaying these types.
	  Previously mhn would always use the internal method for subtypes
	  mixed, alternate, digest, and parallel (even if an alternate
	  method was specified in mhn.defaults).

	* mhn show treats unknown subtypes of multipart, as type
	  multipart/mixed (as specified RFC2046).

	* mhn checks for the parameter "name" rather than "x-name".
	  From MH-6.8.4 patch.

	* Fix double free of ctinfo in user_content when using
	  #forw with single message.  From John MacMillan (and
	  MH-6.8.4 patch).

	* Changed -mhnproc switch for show, to -showmimeproc.

	* Changed profile entry "mhnproc" to "showmimeproc".

	* Added "mime" option to "whatnow", which calls the program
	  "buildmimeproc" (default is mhn -build) to process MIME
	   composition files.

	* Added -build switch to mhn, to process MIME composition
	  files.

	* Did some reorganizing of mhn.c.

	* Changed casting in mts/sendmail/smail.c from (char) to
	  (signed char) so SMTP reply codes work correctly for machines
	  which used unsigned chars by default.

Sat Jun 21 01:21:47 1997  Richard Coleman  <coleman@math.gatech.edu>

	* Released nmh-0.15.

	* Added new form "scan.unseen" to distribution.  It marks messages
	  which are in any sequence in Unseen-Sequence.

	* Do some rearranging of date/time code in zotnet/tws/dtime.c

	* Fix sign extension bugs in fmt_scan.c.

	* Fix m_atoi.c so that strings ending in non-digit characters
	  return 0.

	* Split code in burst.c so that finding delimiters of digested
	  messages and bursting a message into multiple messages are
	  two separate functions (find_delim and burst).

	* Add workaround fo AC_PATH_PROG in configure.in, so
	  that BSD4.4 machines can find sendmail, vi, more.

	* Added "-width" option to rcvtty.

	* Change a few variable names in zotnet/mts/client.c since
	  they conflict with defines on AIX.

	* Makefile in zotnet/tws assumes lexing of dtimep.lex was
	  unsuccessful if resulting file is less than 500 lines long
	  (rather than 10, which was previous value), since AIX
	  sed gives mangled file of about 200 lines.

	* Extract code in rcvstore.c to link message into folder,
	  and put in own subroutine.

	* Extract code in refile.c to link message into folder,
	  and put in own subroutine.

	* Moved code to remove messages from folder into own
	  routine "folder_delmsgs" in sbr.  Changed rmm.c and
	  refile.c to use new routine.

Fri May 16 06:09:31 1997  Richard Coleman  <coleman@math.gatech.edu>

	* Renamed m_seqok to seq_nameok.

	* Changed m_setunseen, msh, mshcmds, flist, and scan to use
	  seq_getnum.

	* Changed m_seqflag to return the number of a sequence rather
	  than its bit flag.  Changed its name to seq_getnum and renamed
	  file to sbr/seq_getnum.c.

	* Removed function m_seqnew and file sbr/m_seqnew.c since it is
	  no longer used.

	* Added zero switch to m_seqadd function to zero out bits before
	  adding message to sequence.

	* Renamed function m_setvis to m_setunseen, and renamed
	  corresponding file in sbr.

	* Renamed function m_setseq to m_setprev, and renamed corresponding
	  file in sbr.

	* Changed mark.c and pick.c to use m_seqaddsel and m_seqdelsel.

	* Added new function m_seqdelsel to m_seqdel.c, which deletes
	  all selected messages from a sequence.

	* Added new function m_seqaddsel to m_seqadd.c, which adds all
	  selected messages to a sequence.

	* Split sbr/m_seqnew.c into m_seqadd.c, m_seqdel.c, m_seqnew.c,
	  and m_seqok.c.

Thu May 15 00:53:17 1997  Richard Coleman  <coleman@math.gatech.edu>

	* Renamed function pack_folder to m_packfolder, and moved it
	  from uip/folder.c into its own file sbr/m_packfolder.c

Wed May 14 23:38:00 1997  Richard Coleman  <coleman@math.gatech.edu>

	* Changed function m_gmsg to m_readfolder.  Renamed file
	  sbr/m_gmsg.c to sbr/m_readfolder.c.

Mon May  5 19:57:11 1997  Richard Coleman  <coleman@math.gatech.edu>

	* Expanded rcvtty man page, and added small patch from
	  MH-6.8.4 distribution.

Fri May  2 15:24:34 1997  Richard Coleman  <coleman@math.gatech.edu>

	* Released nmh-0.14.

	* Comment out configure test and code for tgetent to allocate its
	  own termcap buffer when passed a NULL argument.

Sat Apr 26 03:46:38 1997  Richard Coleman  <coleman@math.gatech.edu>

	* Added new options `-checkmime', `-nocheckmime', and `-mhnproc'
	  to show.  Restructured code to handle options to various
	  `procs' better.  Deprecated `-noshowproc' option and NOMHNPROC
	  environment variable.

	* Added new man page `mh-draft' which documents the
	  draft folder facility in nmh.

	* Renamed fmtsbr.h to fmt_scan.h.  Renamed fmtcompile.h
	  to fmt_compile.h.

	* split fmtsbr.c into fmt_scan.c and fmt_new.c.  Renamed
	  fmtcompile.c to fmt_compile.c, and formataddr.c to
	  fmt_addr.c.

	* `send -help' wasn't showing the -(no)mime and -split
	  options.

Fri Apr 25 02:50:36 1997  Richard Coleman  <coleman@math.gatech.edu>

	* Released nmh-0.13.

	* Changed mhpath so it doesn't abort if a message sequence
	  such as "mhpath all" expands to more than 1000 messages.
	  Also mhpath now dynamically reallocated space for message
	  names (The number of command line arguments is still limited
	  to MAXARGS).

	* Did some general restructuring of the code in folder.c
	  that checks for folder information, and prints it.

Thu Apr 24 01:04:37 1997  Richard Coleman  <coleman@math.gatech.edu>

	* Changed `folder' to reallocate space for folder names if
	  necessary.  So `folders' can now handle more than 300 folders.

Tue Apr 22 14:01:26 1997  Richard Coleman  <coleman@math.gatech.edu>

	* Change configure to use a compile check to see if the tm struct
	  has tm_gmtoff, rather than using egrep.

Mon Apr 21 02:19:17 1997  Richard Coleman  <coleman@math.gatech.edu>

	* Released nmh-0.12.

	* Had set_exists and unset_exists macros backwards.

	* Released nmh-0.11.

Thu Apr 10 02:39:53 1997  Richard Coleman  <coleman@math.gatech.edu>

	* Added documentation to mh-profile.man about the various
	  `procs' (mhlproc, showproc, lproc, etc...).

	* Replace the bit twiddling for SELECTED, UNSEEN, and
	  mp->attrstats with macros.

	* If system doesn't have SIGEMT (like Linux), then use SIGTERM
	  in msh.c instead.

	* Change fstat to stat in m_gmsg.c since Linux wants
	  to hide dd->dd_fd.

	* Merge Linux patch sent in by Michel Oosterhof (original
	  patch from bsa@kf8nh.wariat.org).

	* Document an undocumented MH feature.  mhn -form mhl.null
	  will suppress the display of the message header.

	* mhparam will now return "mhparam etcdir".

	* Add catproc to /config/config.c and use that in show.c
	  and mshcmds.c, rather than hard coding in /bin/cat.

	* Add mhnproc to the list of `procs' in mh-profile.man.

	* Add configure test for lorder and tsort commands.

	* Commented out the padding in the `msgs` struct in h/mh.h

	* Change m_gmsg.c to allocate elements to the `info' array by
	  500 elements at a time (rather than MAXFOLDERS / 5).

	* Add note to man page for mhmail that zero length messages are
	  not sent.  Need to use -body "" to send empty messages.

	* zotnet/mts/mts.c : compare character with '\0', not NULL.

	* sbr/getcpy.c : assign '\0' to character, not NULL.

	* add m_fmsg to most programs in uip so that they explicitly free
	  folder/message structure when done with folder.

	* uip/slocal.c : cleanup processing of sender.  Make sure it is
	  defined even if message is missing "From " line.

Mon Mar 31 03:37:35 1997  Richard Coleman  <coleman@math.gatech.edu>

	* Released nmh-0.10.

Sun Mar 30 21:46:17 1997  Richard Coleman  <coleman@math.gatech.edu>

	* Add configure check for <locale.h>.  Turn on LOCALE support
	  by default.

Thu Mar 20 03:21:24 1997  Richard Coleman  <coleman@math.gatech.edu>

	* Reversed previous decision to retain "From " lines in slocal.
	  The "From " line is now removed from all messages.

	* inc now saves the date from the "From " envelope in the
	  Delivery-Date header for all messages.

	* sbr/m_getfld.c: Clean up processing of Return-Path and
	  Delivery-Date from the "From " envelope.

Mon Mar 17 19:03:36 1997  Richard Coleman  <coleman@math.gatech.edu>

	* client.c: cast iaddr to int before comparing return value
	  of inet_addr with NOTOK.

Tue Mar 11 04:38:10 1997  Richard Coleman  <coleman@math.gatech.edu>

	* Grep test for signal names was failing on some OS'es because
	  of missing tabs in regex.

Sat Mar  8 01:58:22 1997  Richard Coleman  <coleman@math.gatech.edu>

	* Released nmh-0.09.

	* Move config files and format files to *.old before installing.

	* Add configure check for killpg.

	* msh.c: include <termios.h> instead of <termio.h> and
	  <sys/ioctl.h>.

	* prompter.c: don't include <sys/ioctl.h> anymore.

Thu Mar  6 04:03:24 1997  Richard Coleman  <coleman@math.gatech.edu>

	* Added `-mime' and `-nomime' options to `repl'.
	  From MH-6.8.4 diff.

Tue Mar  4 03:10:37 1997  Richard Coleman  <coleman@math.gatech.edu>

	* ruserpass.c : removed conflicting prototypes.

	* rcvtty.c : Fixed rcvtty to obey terminal permissions granted
	  by `mesg' command.  Previously only worked on BSD machines.

Mon Mar  3 00:18:59 1997  Richard Coleman  <coleman@math.gatech.edu>

	* rcvtty.c : Changed to use #define UTMP_FILE (if exists) rather
	  than hard coded "/etc/utmp".

	* Released nmh-0.08.

	* Changed slocal to lock .maildelivery (or file given by -maildelivery)
	  when accessing ndbm/db file for duplicate suppression, instead of
	  locking database itself.

Thu Feb 27 05:28:09 1997  Richard Coleman  <coleman@math.gatech.edu>

	* Added slocal action `mmdf' to deliver to a file in mmdf format.

	* Changed the slocal actions `file' and `>' to always deliver in
	  mbox (uucp) format rather than be determined by RPATHS config
	  option.

	* Changed the slocal action `mbox' to deliver in mbox (uucp) format
	  rather than mmdf format.

	* slocal now adds Delivery-Date field to all messages (previously it
	  only added it to messages when delivering them to a file). The
	  "From " line is now retained on all messages if compiling with
	  RPATHS, rather than being discarded.

	* rcvpack no longer adds the Delivery-Date field to messages.

Sun Feb 23 22:03:54 1997  Richard Coleman  <coleman@math.gatech.edu>

	* Removed the script packmbox, since it's functionality has been
	  added to packf.

	* Changed packf so that it uses mbox (uucp) format by default
	  rather than mmdf format.  Added options -mbox and -mmdf to
	  packf so you can choose the preferred format.

	* Changed rcvpack so that it uses mbox (uucp) format by default
	  rather than mmdf format.  Added options -mbox and -mmdf to
	  rcvpack so you can choose the preferred format.

Tue Feb 18 00:01:05 1997  Richard Coleman  <coleman@math.gatech.edu>

	* Changed nmh to use dot locking by default (although you
	  can still easily change this in config.h).

	* Simplified locking code.  Removed code allowing setting of
	  locking type in mts.conf.  Now the locking type and locking
	  directory (if any) can only be set at compile time.

Fri Feb 14 02:49:18 1997  Richard Coleman  <coleman@math.gatech.edu>

	* Prefer getting timezone information from tm->gmtoff rather
	  than tzset and external timezone variable.

Thu Feb 13 00:35:45 1997  Richard Coleman  <coleman@math.gatech.edu>

	* Fixed typo in ruserpass.c in the variable toktabs.

	* When ruserpass was added to LIBOBJS, it was missing
	  the suffix.

	* Released nmh-0.07.

Tue Feb 11 01:29:47 1997  Richard Coleman  <coleman@math.gatech.edu>

	* Add check to configure, so that if ruserpass, or _ruserpass
	  is not found, build version of ruserpass in sbr.

	* Added define's to discard.c, m_getfld.c, and scansbr.c so
	  the code that manipulates internals of stdio, will build
	  on SCO 5.x.

	* Added #define to control whether to compile the simple
	  built-in FTP client in mhn.

	* Added configure check for ushort and ulong.  Change code
	  to use ushort/ulong rather than u_short/u_long.

	* A couple of small cleanups in locking code.

	* Added configure check for gmtoff element in struct tm.

	* Added configure check for tzset.

Fri Feb  7 03:01:57 1997  Richard Coleman  <coleman@math.gatech.edu>

	* Released nmh-0.06.

	* Removed code for machines that don't have socket
	  interface (how could they get mail anyway?).

	* Removed code for BSD41 machines.  I don't think there are
	  many such machines around anymore.

	* Add configure check for function uname, and prefer it
	  over gethostname.  General cleanup of zotnet/mts/mts.c.

	* Change all `lseek' calls to use POSIX symbolic constants
	  SEEK_SET, SEEK_CUR, SEEK_END.

Thu Feb  6 01:16:30 1997  Richard Coleman  <coleman@math.gatech.edu>

	* Check lex generated file in zotnet/tws and use
	  pre-generated version if necessary.

	* Released nmh-0.05.

	* Change to use reliable signals on all platforms that have
	  sigaction.  Change so that interrupted system calls are
	  restarted for all signals except SIGALRM.  This fixes alarm
	  handling code in smail.c for BSD based systems.

	* Added lorder and tsort commands so that created libs can
	  be linked in one pass.

Tue Feb  4 01:33:00 1997  Richard Coleman  <coleman@math.gatech.edu>

	* Changed pidwait so that while it is waiting for a child,
	  it should block signals rather than ignore them.

Mon Feb  3 21:05:30 1997  Richard Coleman  <coleman@math.gatech.edu>

	* Add checks to configure for dbm_open and -lndbm.

Thu Jan 30 05:15:42 1997  Richard Coleman  <coleman@math.gatech.edu>

	* folder -pop and folder -push were freeing some memory too
	  quickly, which caused the entry popped from the stack to not
	  become the current folder.

Wed Jan 29 01:28:02 1997  Richard Coleman  <coleman@math.gatech.edu>

	* Released nmh-0.04.

	* Define ospeed and PC in termsbr.c is OS doesn't have
	  it.

Sun Jan 26 20:25:10 1997  Richard Coleman  <coleman@math.gatech.edu>

	* editfile will create a symbolic link to the altmsg if it
	  can't make a link, on any machine supporting lstat.  Formerly
	  this would happen only on BSD42 based machines.

Sat Jan 25 22:54:26 1997  Richard Coleman  <coleman@math.gatech.edu>

	* traverse (in popsbr.c) wasn't calling va_start before using
	  variable argument list.  Fixes core dump in inc when using POP.

Fri Jan 24 03:27:59 1997  Richard Coleman  <coleman@math.gatech.edu>

	* The variable pass in remotemail needed to be set to
	  NULL.  (From MH-6.8.4 diff).  Fixes core dump of msgchk when
	  using POP.

	* inc and msgchk were using -rpop by default when configured
	  with POP support.  Default is now -norpop.

Thu Jan 23 02:01:17 1997  Richard Coleman  <coleman@math.gatech.edu>

	* By default, post will now give the SMTP HELO command with
	  the local hostname.  If you specify a hostname with the
	  clientname: option in mts.conf file, post will give the
	  HELO command with that name instead.  If the argument to the
	  clientname: option is empty, no HELO command is given.
	  (From the MH-6.8.4 diff)

Wed Jan 22 01:55:45 1997  Richard Coleman  <coleman@math.gatech.edu>

	* When using `-help' for a command, it will also print its
	  profile compents from .mh_profile. (From MH-6.8.4 diff)

	* "slocal -file" will now correctly takes its input from
	  a file (currently need to specify full path).

Sun Jan 19 20:37:21 1997  Richard Coleman  <coleman@math.gatech.edu>

	* "slocal -debug" will now issue a warning if a non-blank
	  line in the .maildelivery file has less than 5 fields.

Sat Jan 18 02:26:41 1997  Richard Coleman  <coleman@math.gatech.edu>

	* Changed slocal so that code for duplicate suppression
	  (MH config was MSGID) is always built. Added the options
	  -[no]suppressdup to slocal to turn this on/off.

Thu Jan 16 00:26:34 1997  Richard Coleman  <coleman@math.gatech.edu>

	* Released nmh-0.03.

	* Fixed problem where mark would core dump if no
	  .mh_sequence file existed.

	* Fixed problem where slocal would core dump if -debug
	  option was given, and certain headers were missing.

	* Added patch to slocal to add `folder' (+) action, which
	  is shorthand for piping message to rcvstore.  Updated
	  man page.

Wed Jan 15 21:30:17 1997  Richard Coleman  <coleman@math.gatech.edu>

	* Changed flist option -unseen to -[no]all.  Cleaned up
	  flist man page.

Fri Jan 10 20:36:33 1997  Richard Coleman  <coleman@math.gatech.edu>

	* Fixed flist.  Changed the profile component `Folder-Order'
	  to `Flist-Order.  Added option `-sequence' to flist, so
	  you can specify the name of the sequence to search for.

Thu Jan  9 00:20:48 1997  Richard Coleman  <coleman@math.gatech.edu>

	* A few minor portability cleanups.  Changed to use PATH_MAX
	  rather than MAXPATHLEN.  Don't assume ospeed variable exists
	  in termsbr.c.  Removed some conflicting prototypes.

Wed Jan  8 11:05:02 1997  Richard Coleman  <coleman@math.gatech.edu>

	* Add configure test to check if tgetent will accept NULL
	  and allocate its own buffer.  Borrowed from zsh.

	* Changed libpath to etcpath.

Mon Jan  6 04:15:35 1997  Richard Coleman  <coleman@math.gatech.edu>

	* Cleaned up source code and Makefiles, so that if your `make'
	  supports the VPATH option, you can build nmh in a different
	  directory from where the source code is located.

Fri Jan  3 05:05:18 1997  Richard Coleman  <coleman@math.gatech.edu>

	* Released nmh-0.02.

Wed Jan  1 17:41:52 1997  Richard Coleman  <coleman@math.gatech.edu>

	* Split mhook man page into man pages for rcvdist, rcvpack,
	  and rcvtty.

Tue Dec 31 03:07:48 1996  Richard Coleman  <coleman@math.gatech.edu>

	* Changed code to use strerror, rather than using sys_errlist
	  and sys_nerr directly.

Mon Dec 30 02:15:25 1996  Richard Coleman  <coleman@math.gatech.edu>

	* -compat switch from install-mh removed.

	* Changed the default POP port from "pop" to "pop3".

Sat Dec 28 13:25:05 1996  Richard Coleman  <coleman@math.gatech.edu>

	* Changed mhn_defaults to mhn.defaults.  Changed create_mhn_defaults
	  (again) to mhn.defaults.sh.  Changed find_program (again) to
	  mhn.find.sh.  mhn.defaults.sh now takes the search path
	  as an argument.  Default search path is now specified in Makefile
	  rather than in script.

Fri Dec 27 16:34:01 1996  Richard Coleman  <coleman@math.gatech.edu>

	* Changed mtstailor file to mts.conf.  Updated man pages.

	* Changed si_value to si_val in mhn.c, since it conflicts with
	  macro defined on Solaris.

Thu Dec 26 02:50:15 1996  Richard Coleman  <coleman@math.gatech.edu>

	* Added --enable-nmh-mhe (and --disable-nmh-mhe) to enable/disable
	  support for Emacs front-end mhe.  It is on by default.

	* Added the following configure options: --enable-nmh-pop to
	  enable client side pop support, --enable-nmh-smtp to enable
	  SMTP support.  Client-side pop support now compiles.  Man
	  pages for inc, msgchk, mh-chart now correctly added pop
	  options if enabled.

Tue Dec 24 14:33:20 1996  Richard Coleman  <coleman@math.gatech.edu>

	* Added configure test for bug in C libraries where linker
	  can't find ruserpass, but can find _ruserpass.

	* Fixed configure test so that termcap variable ospeed is
	  correctly found.

Mon Dec 23 19:40:17 1996  Richard Coleman  <coleman@math.gatech.edu>

	* Source files converted to ANSI C.
	
	* md5 now compiled separately rather than being included
	  in mhn.c.  Changed md5 to use memset and memcpy.

Fri Dec 20 02:29:37 1996  Richard Coleman  <coleman@math.gatech.edu>

	* Collected the error routines adios, advise, admonish, and advertise
	  into one file (error.c), and did some rearranging of the code.

Thu Dec 19 19:05:29 1996  Richard Coleman  <coleman@math.gatech.edu>

	* Added awk script sigmsg.awk (originally written by
	  Geoff Wing <mason@werple.apana.org.au> for zsh) to
	  automatically generate signal messages for pidstatus.c.
	  Added files sbr/signals.c, h/signals.h.  Code now uses
	  sigprocmask to block signals (if available).  Code now uses
	  signal blocking on non-BSD machines.

Wed Dec 18 01:55:17 1996  Richard Coleman  <coleman@math.gatech.edu>

	* Add configure check for ATTVIBUG.  From Soren's mh autoconf work.

	* Released nmh-0.01.

	* Added configure code to check for type of signals functions
	  you have (POSIX or BSD style signals).  Added function
	  SIGPROCMASK to simulate sigprocmask on machines that don't
	  have POSIX signals.

Fri Dec 13 19:40:48 1996  Richard Coleman  <coleman@math.gatech.edu>

	* Added -version switch to all commands.  Also added to
	  their man pages.

Mon Dec  9 16:36:54 1996  Richard Coleman  <coleman@math.gatech.edu>

	* Renamed uip/trmsbr.c to termsbr.c and changed it to use
	  POSIX termios.h style functions if present.

Tue Dec  3 16:18:39 1996  Richard Coleman  <coleman@math.gatech.edu>

	* Changed support/general/bootmhn.sh to output new mhn_defaults
	  file to standard output by default (makes it easier for testing).
	  Changed name of script to create_mhn_defaults.  Changed bootmhn.findit
	  script to find_program.

Sun Dec  1 10:00:00 1996  Richard Coleman  <coleman@math.gatech.edu>

	* Added patch to uip/folder.c from exmh distribution to
	  speed up -recurse option.

	* Added flist command from exmh distribution.  It doesn't work
	  yet, but it compiles :-)

	* Changed default location for install to
	  /usr/local/nmh/{bin,etc,lib,man}.  Split files so that format
	  and configuration files go in nmh/etc, and support binaries go
	  in nmh/lib.  Of course, all this can now be changed in the top
	  level Makefile. 

	* Started with mh-6.8.3 as based and converted to autoconf.
	  Rewrote all the Makefiles.  Currently only works with sendmail/smtp.
	  Pop support and plenty of other things, are now broken.
